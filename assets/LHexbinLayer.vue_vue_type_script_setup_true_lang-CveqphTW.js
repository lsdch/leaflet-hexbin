import{d as ct,h as Q,r as j,i as Ar,p as U,b as It,j as ft,_ as V,m as Nt,n as Z,k as Me,l as de,q as Pt,s as Ne,v as Mr,x as Nr,y as Pr,z as Tr,o as Cr,A as kr,u as Er}from"./index-c_HESE6k.js";import*as P from"leaflet";const he=(t,e)=>{for(const n of Object.keys(e))t.on(n,e[n])},bn=t=>{for(const e of Object.keys(t)){const n=t[e];n&&G(n.cancel)&&n.cancel()}},xn=t=>!t||typeof t.charAt!="function"?t:t.charAt(0).toUpperCase()+t.slice(1),G=t=>typeof t=="function",dt=(t,e,n)=>{for(const r in n){const i="set"+xn(r);t[i]?de(()=>n[r],(o,a)=>{t[i](o,a)}):e[i]&&de(()=>n[r],o=>{e[i](o)})}},S=(t,e,n={})=>{const r={...n};for(const i in t){const o=e[i],a=t[i];o&&(o&&o.custom===!0||a!==void 0&&(r[i]=a))}return r},Tt=t=>{const e={},n={};for(const r in t)if(r.startsWith("on")&&!r.startsWith("onUpdate")&&r!=="onReady"){const i=r.slice(2).toLocaleLowerCase();e[i]=t[r]}else n[r]=t[r];return{listeners:e,attrs:n}},wn=async t=>{const e=await Promise.all([V(()=>import("./marker-icon-2x-D4k_ikNW.js"),[]),V(()=>import("./marker-icon-C2eJqgqv.js"),[]),V(()=>import("./marker-shadow-DU6CIJ0p.js"),[])]);delete t.Default.prototype._getIconUrl,t.Default.mergeOptions({iconRetinaUrl:e[0].default,iconUrl:e[1].default,shadowUrl:e[2].default})},bt=t=>{const e=j((...r)=>console.warn(`Method ${t} has been invoked without being replaced`)),n=(...r)=>e.value(...r);return n.wrapped=e,U(t,n),n},xt=(t,e)=>t.wrapped.value=e,X=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,$=t=>{const e=Pt(t);if(e===void 0)throw new Error(`Attempt to inject ${t.description} before it was provided.`);return e},Sn=Object.freeze(Object.defineProperty({__proto__:null,WINDOW_OR_GLOBAL:X,assertInject:$,bindEventHandlers:he,cancelDebounces:bn,capitalizeFirstLetter:xn,isFunction:G,propsBinder:dt,propsToLeafletOptions:S,provideLeafletWrapper:bt,remapEvents:Tt,resetWebpackIcon:wn,updateLeafletWrapper:xt},Symbol.toStringTag,{value:"Module"})),ht=Symbol("useGlobalLeaflet"),pt=Symbol("addLayer"),Ct=Symbol("removeLayer"),Pe=Symbol("registerControl"),Ln=Symbol("registerLayerControl"),On=Symbol("canSetParentHtml"),An=Symbol("setParentHtml"),Mn=Symbol("setIcon"),Nn=Symbol("bindPopup"),Pn=Symbol("bindTooltip"),Tn=Symbol("unbindPopup"),Te=Symbol("unbindTooltip"),Rr=Object.freeze(Object.defineProperty({__proto__:null,AddLayerInjection:pt,BindPopupInjection:Nn,BindTooltipInjection:Pn,CanSetParentHtmlInjection:On,RegisterControlInjection:Pe,RegisterLayerControlInjection:Ln,RemoveLayerInjection:Ct,SetIconInjection:Mn,SetParentHtmlInjection:An,UnbindPopupInjection:Tn,UnbindTooltipInjection:Te,UseGlobalLeafletInjection:ht},Symbol.toStringTag,{value:"Module"})),yt={options:{type:Object,default:()=>({}),custom:!0}},mt=t=>({options:t.options,methods:{}}),jr=Object.freeze(Object.defineProperty({__proto__:null,componentProps:yt,setupComponent:mt},Symbol.toStringTag,{value:"Module"})),tt={...yt,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},gt=(t,e,n)=>{const r=$(pt),i=$(Ct),{options:o,methods:a}=mt(t),s=S(t,tt,o),l=()=>r({leafletObject:e.value}),u=()=>i({leafletObject:e.value}),c={...a,setAttribution(f){u(),e.value.options.attribution=f,t.visible&&l()},setName(){u(),t.visible&&l()},setLayerType(){u(),t.visible&&l()},setVisible(f){e.value&&(f?l():u())},bindPopup(f){if(!e.value||!G(e.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}e.value.bindPopup(f)},bindTooltip(f){if(!e.value||!G(e.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}e.value.bindTooltip(f)},unbindTooltip(){e.value&&(G(e.value.closeTooltip)&&e.value.closeTooltip(),G(e.value.unbindTooltip)&&e.value.unbindTooltip())},unbindPopup(){e.value&&(G(e.value.closePopup)&&e.value.closePopup(),G(e.value.unbindPopup)&&e.value.unbindPopup())},updateVisibleProp(f){n.emit("update:visible",f)}};return U(Nn,c.bindPopup),U(Pn,c.bindTooltip),U(Tn,c.unbindPopup),U(Te,c.unbindTooltip),Ne(()=>{c.unbindPopup(),c.unbindTooltip(),u()}),{options:s,methods:c}},$r=(t,e)=>{if(t&&e.default)return Q("div",{style:{display:"none"}},e.default())},Ir=Object.freeze(Object.defineProperty({__proto__:null,layerProps:tt,render:$r,setupLayer:gt},Symbol.toStringTag,{value:"Module"})),Ce={...tt,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},Cn=(t,e,n)=>{const{options:r,methods:i}=gt(t,e,n);return{options:S(t,Ce,r),methods:i}},Br=Object.freeze(Object.defineProperty({__proto__:null,interactiveLayerProps:Ce,setupInteractiveLayer:Cn},Symbol.toStringTag,{value:"Module"})),re={...Ce,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},ke=(t,e,n)=>{const{options:r,methods:i}=Cn(t,e,n),o=S(t,re,r),a=$(Ct),s={...i,setStroke(l){e.value.setStyle({stroke:l})},setColor(l){e.value.setStyle({color:l})},setWeight(l){e.value.setStyle({weight:l})},setOpacity(l){e.value.setStyle({opacity:l})},setLineCap(l){e.value.setStyle({lineCap:l})},setLineJoin(l){e.value.setStyle({lineJoin:l})},setDashArray(l){e.value.setStyle({dashArray:l})},setDashOffset(l){e.value.setStyle({dashOffset:l})},setFill(l){e.value.setStyle({fill:l})},setFillColor(l){e.value.setStyle({fillColor:l})},setFillOpacity(l){e.value.setStyle({fillOpacity:l})},setFillRule(l){e.value.setStyle({fillRule:l})},setClassName(l){e.value.setStyle({className:l})}};return Me(()=>{a({leafletObject:e.value})}),{options:o,methods:s}},zr=Object.freeze(Object.defineProperty({__proto__:null,pathProps:re,setupPath:ke},Symbol.toStringTag,{value:"Module"})),Ee={...re,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}},kn=(t,e,n)=>{const{options:r,methods:i}=ke(t,e,n),o=S(t,Ee,r),a={...i,setRadius(s){e.value.setRadius(s)},setLatLng(s){e.value.setLatLng(s)}};return{options:o,methods:a}},Dr=Object.freeze(Object.defineProperty({__proto__:null,circleMarkerProps:Ee,setupCircleMarker:kn},Symbol.toStringTag,{value:"Module"})),En={...Ee,radius:{type:Number}},Fr=(t,e,n)=>{const{options:r,methods:i}=kn(t,e,n),o=S(t,En,r),a={...i};return{options:o,methods:a}},Vr=Object.freeze(Object.defineProperty({__proto__:null,circleProps:En,setupCircle:Fr},Symbol.toStringTag,{value:"Module"})),et={...yt,position:{type:String}},_t=(t,e)=>{const{options:n,methods:r}=mt(t),i=S(t,et,n),o={...r,setPosition(a){e.value&&e.value.setPosition(a)}};return Ne(()=>{e.value&&e.value.remove()}),{options:i,methods:o}},Rn=t=>t.default?Q("div",{ref:"root"},t.default()):null,Hr=Object.freeze(Object.defineProperty({__proto__:null,controlProps:et,renderLControl:Rn,setupControl:_t},Symbol.toStringTag,{value:"Module"}));ct({name:"LControl",props:{...et,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(t,e){const n=j(),r=j(),i=Pt(ht),o=$(Pe),{options:a,methods:s}=_t(t,n);return ft(async()=>{const{Control:l,DomEvent:u}=i?X.L:await V(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]),c=l.extend({onAdd(){return r.value}});n.value=Nt(new c(a)),dt(s,n.value,t),o({leafletObject:n.value}),t.disableClickPropagation&&r.value&&u.disableClickPropagation(r.value),t.disableScrollPropagation&&r.value&&u.disableScrollPropagation(r.value),Z(()=>e.emit("ready",n.value))}),{root:r,leafletObject:n}},render(){return Rn(this.$slots)}});const jn={...et,prefix:{type:String}},Gr=(t,e)=>{const{options:n,methods:r}=_t(t,e),i=S(t,jn,n),o={...r,setPrefix(a){e.value.setPrefix(a)}};return{options:i,methods:o}},qr=Object.freeze(Object.defineProperty({__proto__:null,controlAttributionProps:jn,setupControlAttribution:Gr},Symbol.toStringTag,{value:"Module"})),$n={...et,collapsed:{type:Boolean,default:void 0},autoZIndex:{type:Boolean,default:void 0},hideSingleBase:{type:Boolean,default:void 0},sortLayers:{type:Boolean,default:void 0},sortFunction:{type:Function}},Ur=(t,e)=>{const{options:n}=_t(t,e);return{options:S(t,$n,n),methods:{addLayer(r){r.layerType==="base"?e.value.addBaseLayer(r.leafletObject,r.name):r.layerType==="overlay"&&e.value.addOverlay(r.leafletObject,r.name)},removeLayer(r){e.value.removeLayer(r.leafletObject)}}}},Xr=Object.freeze(Object.defineProperty({__proto__:null,controlLayersProps:$n,setupControlLayers:Ur},Symbol.toStringTag,{value:"Module"})),In={...et,maxWidth:{type:Number},metric:{type:Boolean,default:void 0},imperial:{type:Boolean,default:void 0},updateWhenIdle:{type:Boolean,default:void 0}},Wr=(t,e)=>{const{options:n,methods:r}=_t(t,e);return{options:S(t,In,n),methods:r}},Yr=Object.freeze(Object.defineProperty({__proto__:null,controlScaleProps:In,setupControlScale:Wr},Symbol.toStringTag,{value:"Module"})),Bn={...et,zoomInText:{type:String},zoomInTitle:{type:String},zoomOutText:{type:String},zoomOutTitle:{type:String}},Zr=(t,e)=>{const{options:n,methods:r}=_t(t,e);return{options:S(t,Bn,n),methods:r}},Jr=Object.freeze(Object.defineProperty({__proto__:null,controlZoomProps:Bn,setupControlZoom:Zr},Symbol.toStringTag,{value:"Module"})),ie={...tt},Re=(t,e,n)=>{const{options:r,methods:i}=gt(t,e,n),o=S(t,ie,r),a={...i,addLayer(s){e.value.addLayer(s.leafletObject)},removeLayer(s){e.value.removeLayer(s.leafletObject)}};return U(pt,a.addLayer),U(Ct,a.removeLayer),{options:o,methods:a}},Kr=Object.freeze(Object.defineProperty({__proto__:null,layerGroupProps:ie,setupLayerGroup:Re},Symbol.toStringTag,{value:"Module"})),zn={...ie},Qr=(t,e,n)=>{const{options:r,methods:i}=Re(t,e,n),o=S(t,zn,r),a={...i};return{options:o,methods:a}},ti=Object.freeze(Object.defineProperty({__proto__:null,featureGroupProps:zn,setupFeatureGroup:Qr},Symbol.toStringTag,{value:"Module"})),Dn={...ie,geojson:{type:[Object,Array],custom:!0},optionsStyle:{type:Function,custom:!0}},ei=(t,e,n)=>{const{options:r,methods:i}=Re(t,e,n),o=S(t,Dn,r);Object.prototype.hasOwnProperty.call(t,"optionsStyle")&&(o.style=t.optionsStyle);const a={...i,setGeojson(s){e.value.clearLayers(),e.value.addData(s)},setOptionsStyle(s){e.value.setStyle(s)},getGeoJSONData(){return e.value.toGeoJSON()},getBounds(){return e.value.getBounds()}};return{options:o,methods:a}},ni=Object.freeze(Object.defineProperty({__proto__:null,geoJSONProps:Dn,setupGeoJSON:ei},Symbol.toStringTag,{value:"Module"})),oe={...tt,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},je=(t,e,n)=>{const{options:r,methods:i}=gt(t,e,n),o=S(t,oe,r),a={...i,setTileComponent(){var s;(s=e.value)==null||s.redraw()}};return Ne(()=>{e.value.off()}),{options:o,methods:a}},Fn=(t,e,n,r)=>t.extend({initialize(i){this.tileComponents={},this.on("tileunload",this._unloadTile),n.setOptions(this,i)},createTile(i){const o=this._tileCoordsToKey(i);this.tileComponents[o]=e.create("div");const a=Q({setup:r,props:["coords"]},{coords:i});return Mr(a,this.tileComponents[o]),this.tileComponents[o]},_unloadTile(i){const o=this._tileCoordsToKey(i.coords);this.tileComponents[o]&&(this.tileComponents[o].innerHTML="",this.tileComponents[o]=void 0)}}),ri=Object.freeze(Object.defineProperty({__proto__:null,CreateVueGridLayer:Fn,gridLayerProps:oe,setupGridLayer:je},Symbol.toStringTag,{value:"Module"}));ct({props:{...oe,childRender:{type:Function,required:!0}},setup(t,e){const n=j(),r=j(null),i=j(!1),o=Pt(ht),a=$(pt),{options:s,methods:l}=je(t,n,e);return ft(async()=>{const{GridLayer:u,DomUtil:c,Util:f}=o?X.L:await V(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]),d=Fn(u,c,f,t.childRender);n.value=Nt(new d(s));const{listeners:h}=Tt(e.attrs);n.value.on(h),dt(l,n.value,t),a({...t,...l,leafletObject:n.value}),i.value=!0,Z(()=>e.emit("ready",n.value))}),{root:r,ready:i,leafletObject:n}},render(){return this.ready?Q("div",{style:{display:"none"},ref:"root"}):null}});const pe={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}},ii=Object.freeze(Object.defineProperty({__proto__:null,iconProps:pe},Symbol.toStringTag,{value:"Module"}));ct({name:"LIcon",props:{...pe,...yt},setup(t,e){const n=j(),r=Pt(ht),i=$(On),o=$(An),a=$(Mn);let s,l,u,c,f;const d=(m,_,g)=>{const v=m&&m.innerHTML;if(!_){g&&f&&i()&&o(v);return}const{listeners:O}=Tt(e.attrs);f&&l(f,O);const{options:L}=mt(t),A=S(t,pe,L);v&&(A.html=v),f=A.html?u(A):c(A),s(f,O),a(f)},h=()=>{Z(()=>d(n.value,!0,!1))},y=()=>{Z(()=>d(n.value,!1,!0))},p={setIconUrl:h,setIconRetinaUrl:h,setIconSize:h,setIconAnchor:h,setPopupAnchor:h,setTooltipAnchor:h,setShadowUrl:h,setShadowRetinaUrl:h,setShadowAnchor:h,setBgPos:h,setClassName:h,setHtml:h};return ft(async()=>{const{DomEvent:m,divIcon:_,icon:g}=r?X.L:await V(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);s=m.on,l=m.off,u=_,c=g,dt(p,{},t),new MutationObserver(y).observe(n.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),h()}),{root:n}},render(){const t=this.$slots.default?this.$slots.default():void 0;return Q("div",{ref:"root"},t)}});const Vn={...tt,opacity:{type:Number},alt:{type:String},interactive:{type:Boolean,default:void 0},crossOrigin:{type:Boolean,default:void 0},errorOverlayUrl:{type:String},zIndex:{type:Number},className:{type:String},url:{type:String,required:!0,custom:!0},bounds:{type:[Array,Object],required:!0,custom:!0}},oi=(t,e,n)=>{const{options:r,methods:i}=gt(t,e,n),o=S(t,Vn,r),a={...i,setOpacity(s){return e.value.setOpacity(s)},setUrl(s){return e.value.setUrl(s)},setBounds(s){return e.value.setBounds(s)},getBounds(){return e.value.getBounds()},getElement(){return e.value.getElement()},bringToFront(){return e.value.bringToFront()},bringToBack(){return e.value.bringToBack()},setZIndex(s){return e.value.setZIndex(s)}};return{options:o,methods:a}},ai=Object.freeze(Object.defineProperty({__proto__:null,imageOverlayProps:Vn,setupImageOverlay:oi},Symbol.toStringTag,{value:"Module"}));function si(t,e,n){var r,i,o;e===void 0&&(e=50),n===void 0&&(n={});var a=(r=n.isImmediate)!=null&&r,s=(i=n.callback)!=null&&i,l=n.maxWait,u=Date.now(),c=[];function f(){if(l!==void 0){var h=Date.now()-u;if(h+e>=l)return l-h}return e}var d=function(){var h=[].slice.call(arguments),y=this;return new Promise(function(p,m){var _=a&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,u=Date.now(),!a){var v=t.apply(y,h);s&&s(v),c.forEach(function(O){return(0,O.resolve)(v)}),c=[]}},f()),_){var g=t.apply(y,h);return s&&s(g),p(g)}c.push({resolve:p,reject:m})})};return d.cancel=function(h){o!==void 0&&clearTimeout(o),c.forEach(function(y){return(0,y.reject)(h)}),c=[]},d}const Je={...yt,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},Fl=ct({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:Je,setup(t,e){const n=j(),r=Ar({ready:!1,layersToAdd:[],layersInControl:[]}),{options:i}=mt(t),o=S(t,Je,i),{listeners:a,attrs:s}=Tt(e.attrs),l=bt(pt),u=bt(Ct),c=bt(Pe),f=bt(Ln);U(ht,t.useGlobalLeaflet);const d=It(()=>{const _={};return t.noBlockingAnimations&&(_.animate=!1),_}),h=It(()=>{const _=d.value;return t.padding&&(_.padding=t.padding),t.paddingTopLeft&&(_.paddingTopLeft=t.paddingTopLeft),t.paddingBottomRight&&(_.paddingBottomRight=t.paddingBottomRight),_}),y={moveend:si(_=>{r.leafletRef&&(e.emit("update:zoom",r.leafletRef.getZoom()),e.emit("update:center",r.leafletRef.getCenter()),e.emit("update:bounds",r.leafletRef.getBounds()))}),overlayadd(_){const g=r.layersInControl.find(v=>v.name===_.name);g&&g.updateVisibleProp(!0)},overlayremove(_){const g=r.layersInControl.find(v=>v.name===_.name);g&&g.updateVisibleProp(!1)}};ft(async()=>{t.useGlobalLeaflet&&(X.L=X.L||await V(()=>import("leaflet"),[]));const{map:_,CRS:g,Icon:v,latLngBounds:O,latLng:L,stamp:A}=t.useGlobalLeaflet?X.L:await V(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);try{o.beforeMapMount&&await o.beforeMapMount()}catch(b){console.error(`The following error occurred running the provided beforeMapMount hook ${b.message}`)}await wn(v);const nt=typeof o.crs=="string"?g[o.crs]:o.crs;o.crs=nt||g.EPSG3857;const k={addLayer(b){b.layerType!==void 0&&(r.layerControl===void 0?r.layersToAdd.push(b):r.layersInControl.find(w=>A(w.leafletObject)===A(b.leafletObject))||(r.layerControl.addLayer(b),r.layersInControl.push(b))),b.visible!==!1&&r.leafletRef.addLayer(b.leafletObject)},removeLayer(b){b.layerType!==void 0&&(r.layerControl===void 0?r.layersToAdd=r.layersToAdd.filter(w=>w.name!==b.name):(r.layerControl.removeLayer(b.leafletObject),r.layersInControl=r.layersInControl.filter(w=>A(w.leafletObject)!==A(b.leafletObject)))),r.leafletRef.removeLayer(b.leafletObject)},registerLayerControl(b){r.layerControl=b,r.layersToAdd.forEach(w=>{r.layerControl.addLayer(w)}),r.layersToAdd=[],c(b)},registerControl(b){r.leafletRef.addControl(b.leafletObject)},setZoom(b){const w=r.leafletRef.getZoom();b!==w&&r.leafletRef.setZoom(b,d.value)},setCrs(b){const w=r.leafletRef.getBounds();r.leafletRef.options.crs=b,r.leafletRef.fitBounds(w,{animate:!1,padding:[0,0]})},fitBounds(b){r.leafletRef.fitBounds(b,h.value)},setBounds(b){if(!b)return;const w=O(b);w.isValid()&&!(r.lastSetBounds||r.leafletRef.getBounds()).equals(w,0)&&(r.lastSetBounds=w,r.leafletRef.fitBounds(w))},setCenter(b){if(b==null)return;const w=L(b),x=r.lastSetCenter||r.leafletRef.getCenter();(x.lat!==w.lat||x.lng!==w.lng)&&(r.lastSetCenter=w,r.leafletRef.panTo(w,d.value))}};xt(l,k.addLayer),xt(u,k.removeLayer),xt(c,k.registerControl),xt(f,k.registerLayerControl),r.leafletRef=Nt(_(n.value,o)),dt(k,r.leafletRef,t),he(r.leafletRef,y),he(r.leafletRef,a),r.ready=!0,Z(()=>e.emit("ready",r.leafletRef))}),Me(()=>{bn(y),r.leafletRef&&(r.leafletRef.off(),r.leafletRef.remove())});const p=It(()=>r.leafletRef),m=It(()=>r.ready);return{root:n,ready:m,leafletObject:p,attrs:s}},render({attrs:t}){return t.style||(t.style={}),t.style.width||(t.style.width="100%"),t.style.height||(t.style.height="100%"),Q("div",{...t,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),li=["Symbol(Comment)","Symbol(Text)"],ui=["LTooltip","LPopup"],Hn={...tt,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},ci=(t,e,n)=>{const{options:r,methods:i}=gt(t,e,n),o=S(t,Hn,r),a={...i,setDraggable(s){e.value.dragging&&(s?e.value.dragging.enable():e.value.dragging.disable())},latLngSync(s){n.emit("update:latLng",s.latlng),n.emit("update:lat-lng",s.latlng)},setLatLng(s){if(s!=null&&e.value){const l=e.value.getLatLng();(!l||!l.equals(s))&&e.value.setLatLng(s)}}};return{options:o,methods:a}},fi=(t,e)=>{const n=e.slots.default&&e.slots.default();return n&&n.length&&n.some(di)};function di(t){return!(li.includes(t.type.toString())||ui.includes(t.type.name))}const hi=Object.freeze(Object.defineProperty({__proto__:null,markerProps:Hn,setupMarker:ci,shouldBlankIcon:fi},Symbol.toStringTag,{value:"Module"})),$e={...re,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},Gn=(t,e,n)=>{const{options:r,methods:i}=ke(t,e,n),o=S(t,$e,r),a={...i,setSmoothFactor(s){e.value.setStyle({smoothFactor:s})},setNoClip(s){e.value.setStyle({noClip:s})},addLatLng(s){e.value.addLatLng(s)}};return{options:o,methods:a}},pi=Object.freeze(Object.defineProperty({__proto__:null,polylineProps:$e,setupPolyline:Gn},Symbol.toStringTag,{value:"Module"})),Ut={...$e},qn=(t,e,n)=>{const{options:r,methods:i}=Gn(t,e,n),o=S(t,Ut,r),a={...i,toGeoJSON(s){return e.value.toGeoJSON(s)}};return{options:o,methods:a}},yi=Object.freeze(Object.defineProperty({__proto__:null,polygonProps:Ut,setupPolygon:qn},Symbol.toStringTag,{value:"Module"})),Ie={...yt,content:{type:String,default:null}},Be=(t,e)=>{const{options:n,methods:r}=mt(t),i={...r,setContent(o){e.value&&o!==null&&o!==void 0&&e.value.setContent(o)}};return{options:n,methods:i}},mi=t=>t.default?Q("div",{ref:"root"},t.default()):null,gi=Object.freeze(Object.defineProperty({__proto__:null,popperProps:Ie,render:mi,setupPopper:Be},Symbol.toStringTag,{value:"Module"})),_i={...Ie,latLng:{type:[Object,Array],default:()=>[]}},vi=(t,e)=>{const{options:n,methods:r}=Be(t,e);return{options:n,methods:r}},bi=Object.freeze(Object.defineProperty({__proto__:null,popupProps:_i,setupPopup:vi},Symbol.toStringTag,{value:"Module"})),Un={...Ut,latLngs:{...Ut.latLngs,required:!1},bounds:{type:Object,custom:!0}},xi=(t,e,n)=>{const{options:r,methods:i}=qn(t,e,n),o=S(t,Un,r),a={...i,setBounds(s){e.value.setBounds(s)},setLatLngs(s){e.value.setBounds(s)}};return{options:o,methods:a}},wi=Object.freeze(Object.defineProperty({__proto__:null,rectangleProps:Un,setupRectangle:xi},Symbol.toStringTag,{value:"Module"})),ae={...oe,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:t=>typeof t=="string"?!0:Array.isArray(t)?t.every(e=>typeof e=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},ze=(t,e,n)=>{const{options:r,methods:i}=je(t,e,n),o=S(t,ae,r),a={...i};return{options:o,methods:a}},Si=Object.freeze(Object.defineProperty({__proto__:null,setupTileLayer:ze,tileLayerProps:ae},Symbol.toStringTag,{value:"Module"})),Vl=ct({props:ae,setup(t,e){const n=j(),r=Pt(ht),i=$(pt),{options:o,methods:a}=ze(t,n,e);return ft(async()=>{const{tileLayer:s}=r?X.L:await V(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);n.value=Nt(s(t.url,o));const{listeners:l}=Tt(e.attrs);n.value.on(l),dt(a,n.value,t),i({...t,...a,leafletObject:n.value}),Z(()=>e.emit("ready",n.value))}),{leafletObject:n}},render(){return null}}),Li={...Ie},Oi=(t,e)=>{const{options:n,methods:r}=Be(t,e),i=$(Te);return Me(()=>{i()}),{options:n,methods:r}},Ai=Object.freeze(Object.defineProperty({__proto__:null,setupTooltip:Oi,tooltipProps:Li},Symbol.toStringTag,{value:"Module"})),Xn={...ae,layers:{type:String,required:!0},styles:{type:String},format:{type:String},transparent:{type:Boolean,default:void 0},version:{type:String},crs:{type:Object},uppercase:{type:Boolean,default:void 0}},Mi=(t,e,n)=>{const{options:r,methods:i}=ze(t,e,n);return{options:S(t,Xn,r),methods:{...i}}},Ni=Object.freeze(Object.defineProperty({__proto__:null,setupWMSTileLayer:Mi,wmsTileLayerProps:Xn},Symbol.toStringTag,{value:"Module"})),Wn=Object.freeze(Object.defineProperty({__proto__:null,Circle:Vr,CircleMarker:Dr,Component:jr,Control:Hr,ControlAttribution:qr,ControlLayers:Xr,ControlScale:Yr,ControlZoom:Jr,FeatureGroup:ti,GeoJSON:ni,GridLayer:ri,Icon:ii,ImageOverlay:ai,InteractiveLayer:Br,Layer:Ir,LayerGroup:Kr,Marker:hi,Path:zr,Polygon:yi,Polyline:pi,Popper:gi,Popup:bi,Rectangle:wi,TileLayer:Si,Tooltip:Ai,WmsTileLayer:Ni},Symbol.toStringTag,{value:"Module"}));function Vt(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Pi(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Yn(t){let e,n,r;t.length!==2?(e=Vt,n=(s,l)=>Vt(t(s),l),r=(s,l)=>t(s)-l):(e=t===Vt||t===Pi?t:Ti,n=t,r=t);function i(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<0?u=f+1:c=f}while(u<c)}return u}function o(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function a(s,l,u=0,c=s.length){const f=i(s,l,u,c-1);return f>u&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:a,right:o}}function Ti(){return 0}function Ci(t){return t===null?NaN:+t}const ki=Yn(Vt),Ei=ki.right;Yn(Ci).center;function Ri(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of t)(o=e(o,++i,t))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}const ji=Math.sqrt(50),$i=Math.sqrt(10),Ii=Math.sqrt(2);function Xt(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=ji?10:o>=$i?5:o>=Ii?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=n&&n<2?Xt(t,e,n*2):[s,l,u]}function Bi(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?Xt(e,t,n):Xt(t,e,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(i+u)/-a;else for(let u=0;u<s;++u)l[u]=(i+u)*a;return l}function ye(t,e,n){return e=+e,t=+t,n=+n,Xt(t,e,n)[2]}function zi(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?ye(e,t,n):ye(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}var Di={value:()=>{}};function De(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ht(n)}function Ht(t){this._=t}function Fi(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ht.prototype=De.prototype={constructor:Ht,on:function(t,e){var n=this._,r=Fi(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=Vi(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=Ke(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Ke(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ht(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Vi(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Ke(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Di,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var me="http://www.w3.org/1999/xhtml";const Qe={svg:"http://www.w3.org/2000/svg",xhtml:me,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function se(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Qe.hasOwnProperty(e)?{space:Qe[e],local:t}:t}function Hi(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===me&&e.documentElement.namespaceURI===me?e.createElement(t):e.createElementNS(n,t)}}function Gi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Zn(t){var e=se(t);return(e.local?Gi:Hi)(e)}function qi(){}function Fe(t){return t==null?qi:function(){return this.querySelector(t)}}function Ui(t){typeof t!="function"&&(t=Fe(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=new Array(a),l,u,c=0;c<a;++c)(l=o[c])&&(u=t.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new T(r,this._parents)}function Xi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Wi(){return[]}function Jn(t){return t==null?Wi:function(){return this.querySelectorAll(t)}}function Yi(t){return function(){return Xi(t.apply(this,arguments))}}function Zi(t){typeof t=="function"?t=Yi(t):t=Jn(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(r.push(t.call(l,l.__data__,u,a)),i.push(l));return new T(r,i)}function Kn(t){return function(){return this.matches(t)}}function Qn(t){return function(e){return e.matches(t)}}var Ji=Array.prototype.find;function Ki(t){return function(){return Ji.call(this.children,t)}}function Qi(){return this.firstElementChild}function to(t){return this.select(t==null?Qi:Ki(typeof t=="function"?t:Qn(t)))}var eo=Array.prototype.filter;function no(){return Array.from(this.children)}function ro(t){return function(){return eo.call(this.children,t)}}function io(t){return this.selectAll(t==null?no:ro(typeof t=="function"?t:Qn(t)))}function oo(t){typeof t!="function"&&(t=Kn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],l,u=0;u<a;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new T(r,this._parents)}function tr(t){return new Array(t.length)}function ao(){return new T(this._enter||this._groups.map(tr),this._parents)}function Wt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Wt.prototype={constructor:Wt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function so(t){return function(){return t}}function lo(t,e,n,r,i,o){for(var a=0,s,l=e.length,u=o.length;a<u;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new Wt(t,o[a]);for(;a<l;++a)(s=e[a])&&(i[a]=s)}function uo(t,e,n,r,i,o,a){var s,l,u=new Map,c=e.length,f=o.length,d=new Array(c),h;for(s=0;s<c;++s)(l=e[s])&&(d[s]=h=a.call(l,l.__data__,s,e)+"",u.has(h)?i[s]=l:u.set(h,l));for(s=0;s<f;++s)h=a.call(t,o[s],s,o)+"",(l=u.get(h))?(r[s]=l,l.__data__=o[s],u.delete(h)):n[s]=new Wt(t,o[s]);for(s=0;s<c;++s)(l=e[s])&&u.get(d[s])===l&&(i[s]=l)}function co(t){return t.__data__}function fo(t,e){if(!arguments.length)return Array.from(this,co);var n=e?uo:lo,r=this._parents,i=this._groups;typeof t!="function"&&(t=so(t));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],f=i[u],d=f.length,h=ho(t.call(c,c&&c.__data__,u,r)),y=h.length,p=s[u]=new Array(y),m=a[u]=new Array(y),_=l[u]=new Array(d);n(c,f,p,m,_,h,e);for(var g=0,v=0,O,L;g<y;++g)if(O=p[g]){for(g>=v&&(v=g+1);!(L=m[v])&&++v<y;);O._next=L||null}}return a=new T(a,r),a._enter=s,a._exit=l,a}function ho(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function po(){return new T(this._exit||this._groups.map(tr),this._parents)}function yo(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function mo(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var u=n[l],c=r[l],f=u.length,d=s[l]=new Array(f),h,y=0;y<f;++y)(h=u[y]||c[y])&&(d[y]=h);for(;l<i;++l)s[l]=n[l];return new T(s,this._parents)}function go(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function _o(t){t||(t=vo);function e(f,d){return f&&d?t(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,l=i[o]=new Array(s),u,c=0;c<s;++c)(u=a[c])&&(l[c]=u);l.sort(e)}return new T(i,this._parents).order()}function vo(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function bo(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function xo(){return Array.from(this)}function wo(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function So(){let t=0;for(const e of this)++t;return t}function Lo(){return!this.node()}function Oo(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function Ao(t){return function(){this.removeAttribute(t)}}function Mo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function No(t,e){return function(){this.setAttribute(t,e)}}function Po(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function To(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Co(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ko(t,e){var n=se(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Mo:Ao:typeof e=="function"?n.local?Co:To:n.local?Po:No)(n,e))}function er(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Eo(t){return function(){this.style.removeProperty(t)}}function Ro(t,e,n){return function(){this.style.setProperty(t,e,n)}}function jo(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function $o(t,e,n){return arguments.length>1?this.each((e==null?Eo:typeof e=="function"?jo:Ro)(t,e,n??"")):st(this.node(),t)}function st(t,e){return t.style.getPropertyValue(e)||er(t).getComputedStyle(t,null).getPropertyValue(e)}function Io(t){return function(){delete this[t]}}function Bo(t,e){return function(){this[t]=e}}function zo(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Do(t,e){return arguments.length>1?this.each((e==null?Io:typeof e=="function"?zo:Bo)(t,e)):this.node()[t]}function nr(t){return t.trim().split(/^|\s+/)}function Ve(t){return t.classList||new rr(t)}function rr(t){this._node=t,this._names=nr(t.getAttribute("class")||"")}rr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ir(t,e){for(var n=Ve(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function or(t,e){for(var n=Ve(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Fo(t){return function(){ir(this,t)}}function Vo(t){return function(){or(this,t)}}function Ho(t,e){return function(){(e.apply(this,arguments)?ir:or)(this,t)}}function Go(t,e){var n=nr(t+"");if(arguments.length<2){for(var r=Ve(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Ho:e?Fo:Vo)(n,e))}function qo(){this.textContent=""}function Uo(t){return function(){this.textContent=t}}function Xo(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Wo(t){return arguments.length?this.each(t==null?qo:(typeof t=="function"?Xo:Uo)(t)):this.node().textContent}function Yo(){this.innerHTML=""}function Zo(t){return function(){this.innerHTML=t}}function Jo(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ko(t){return arguments.length?this.each(t==null?Yo:(typeof t=="function"?Jo:Zo)(t)):this.node().innerHTML}function Qo(){this.nextSibling&&this.parentNode.appendChild(this)}function ta(){return this.each(Qo)}function ea(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function na(){return this.each(ea)}function ra(t){var e=typeof t=="function"?t:Zn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ia(){return null}function oa(t,e){var n=typeof t=="function"?t:Zn(t),r=e==null?ia:typeof e=="function"?e:Fe(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function aa(){var t=this.parentNode;t&&t.removeChild(this)}function sa(){return this.each(aa)}function la(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ua(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ca(t){return this.select(t?ua:la)}function fa(t){return arguments.length?this.property("__data__",t):this.node().__data__}function da(t){return function(e){t.call(this,e,this.__data__)}}function ha(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function pa(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function ya(t,e,n){return function(){var r=this.__on,i,o=da(e);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function ma(t,e,n){var r=ha(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(i=0,c=s[l];i<o;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(s=e?ya:pa,i=0;i<o;++i)this.each(s(r[i],e,n));return this}function ar(t,e,n){var r=er(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ga(t,e){return function(){return ar(this,t,e)}}function _a(t,e){return function(){return ar(this,t,e.apply(this,arguments))}}function va(t,e){return this.each((typeof e=="function"?_a:ga)(t,e))}function*ba(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var sr=[null];function T(t,e){this._groups=t,this._parents=e}function kt(){return new T([[document.documentElement]],sr)}function xa(){return this}T.prototype=kt.prototype={constructor:T,select:Ui,selectAll:Zi,selectChild:to,selectChildren:io,filter:oo,data:fo,enter:ao,exit:po,join:yo,merge:mo,selection:xa,order:go,sort:_o,call:bo,nodes:xo,node:wo,size:So,empty:Lo,each:Oo,attr:ko,style:$o,property:Do,classed:Go,text:Wo,html:Ko,raise:ta,lower:na,append:ra,insert:oa,remove:sa,clone:ca,datum:fa,on:ma,dispatch:va,[Symbol.iterator]:ba};function q(t){return typeof t=="string"?new T([[document.querySelector(t)]],[document.documentElement]):new T([[t]],sr)}function wa(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Sa(t,e){if(t=wa(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function He(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function lr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Et(){}var Ot=.7,Yt=1/Ot,at="\\s*([+-]?\\d+)\\s*",At="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",B="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",La=/^#([0-9a-f]{3,8})$/,Oa=new RegExp(`^rgb\\(${at},${at},${at}\\)$`),Aa=new RegExp(`^rgb\\(${B},${B},${B}\\)$`),Ma=new RegExp(`^rgba\\(${at},${at},${at},${At}\\)$`),Na=new RegExp(`^rgba\\(${B},${B},${B},${At}\\)$`),Pa=new RegExp(`^hsl\\(${At},${B},${B}\\)$`),Ta=new RegExp(`^hsla\\(${At},${B},${B},${At}\\)$`),tn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};He(Et,J,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:en,formatHex:en,formatHex8:Ca,formatHsl:ka,formatRgb:nn,toString:nn});function en(){return this.rgb().formatHex()}function Ca(){return this.rgb().formatHex8()}function ka(){return ur(this).formatHsl()}function nn(){return this.rgb().formatRgb()}function J(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=La.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?rn(e):n===3?new M(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Bt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Bt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Oa.exec(t))?new M(e[1],e[2],e[3],1):(e=Aa.exec(t))?new M(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ma.exec(t))?Bt(e[1],e[2],e[3],e[4]):(e=Na.exec(t))?Bt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Pa.exec(t))?sn(e[1],e[2]/100,e[3]/100,1):(e=Ta.exec(t))?sn(e[1],e[2]/100,e[3]/100,e[4]):tn.hasOwnProperty(t)?rn(tn[t]):t==="transparent"?new M(NaN,NaN,NaN,0):null}function rn(t){return new M(t>>16&255,t>>8&255,t&255,1)}function Bt(t,e,n,r){return r<=0&&(t=e=n=NaN),new M(t,e,n,r)}function Ea(t){return t instanceof Et||(t=J(t)),t?(t=t.rgb(),new M(t.r,t.g,t.b,t.opacity)):new M}function ge(t,e,n,r){return arguments.length===1?Ea(t):new M(t,e,n,r??1)}function M(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}He(M,ge,lr(Et,{brighter(t){return t=t==null?Yt:Math.pow(Yt,t),new M(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ot:Math.pow(Ot,t),new M(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new M(Y(this.r),Y(this.g),Y(this.b),Zt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:on,formatHex:on,formatHex8:Ra,formatRgb:an,toString:an}));function on(){return`#${W(this.r)}${W(this.g)}${W(this.b)}`}function Ra(){return`#${W(this.r)}${W(this.g)}${W(this.b)}${W((isNaN(this.opacity)?1:this.opacity)*255)}`}function an(){const t=Zt(this.opacity);return`${t===1?"rgb(":"rgba("}${Y(this.r)}, ${Y(this.g)}, ${Y(this.b)}${t===1?")":`, ${t})`}`}function Zt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Y(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function W(t){return t=Y(t),(t<16?"0":"")+t.toString(16)}function sn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new R(t,e,n,r)}function ur(t){if(t instanceof R)return new R(t.h,t.s,t.l,t.opacity);if(t instanceof Et||(t=J(t)),!t)return new R;if(t instanceof R)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new R(a,s,l,t.opacity)}function ja(t,e,n,r){return arguments.length===1?ur(t):new R(t,e,n,r??1)}function R(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}He(R,ja,lr(Et,{brighter(t){return t=t==null?Yt:Math.pow(Yt,t),new R(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ot:Math.pow(Ot,t),new R(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new M(ce(t>=240?t-240:t+120,i,r),ce(t,i,r),ce(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new R(ln(this.h),zt(this.s),zt(this.l),Zt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Zt(this.opacity);return`${t===1?"hsl(":"hsla("}${ln(this.h)}, ${zt(this.s)*100}%, ${zt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ln(t){return t=(t||0)%360,t<0?t+360:t}function zt(t){return Math.max(0,Math.min(1,t||0))}function ce(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ge=t=>()=>t;function $a(t,e){return function(n){return t+n*e}}function Ia(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Ba(t){return(t=+t)==1?cr:function(e,n){return n-e?Ia(e,n,t):Ge(isNaN(e)?n:e)}}function cr(t,e){var n=e-t;return n?$a(t,n):Ge(isNaN(t)?e:t)}const Jt=function t(e){var n=Ba(e);function r(i,o){var a=n((i=ge(i)).r,(o=ge(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),u=cr(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function za(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Da(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Fa(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=qe(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function Va(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function E(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ha(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=qe(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var _e=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fe=new RegExp(_e.source,"g");function Ga(t){return function(){return t}}function qa(t){return function(e){return t(e)+""}}function fr(t,e){var n=_e.lastIndex=fe.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(t=t+"",e=e+"";(r=_e.exec(t))&&(i=fe.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:E(r,i)})),n=fe.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?qa(l[0].x):Ga(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function qe(t,e){var n=typeof e,r;return e==null||n==="boolean"?Ge(e):(n==="number"?E:n==="string"?(r=J(e))?(e=r,Jt):fr:e instanceof J?Jt:e instanceof Date?Va:Da(e)?za:Array.isArray(e)?Fa:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ha:E)(t,e)}function Ua(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var un=180/Math.PI,ve={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function dr(t,e,n,r,i,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*un,skewX:Math.atan(l)*un,scaleX:a,scaleY:s}}var Dt;function Xa(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ve:dr(e.a,e.b,e.c,e.d,e.e,e.f)}function Wa(t){return t==null||(Dt||(Dt=document.createElementNS("http://www.w3.org/2000/svg","g")),Dt.setAttribute("transform",t),!(t=Dt.transform.baseVal.consolidate()))?ve:(t=t.matrix,dr(t.a,t.b,t.c,t.d,t.e,t.f))}function hr(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,f,d,h,y){if(u!==f||c!==d){var p=h.push("translate(",null,e,null,n);y.push({i:p-4,x:E(u,f)},{i:p-2,x:E(c,d)})}else(f||d)&&h.push("translate("+f+e+d+n)}function a(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:E(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function s(u,c,f,d){u!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:E(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,d,h,y){if(u!==f||c!==d){var p=h.push(i(h)+"scale(",null,",",null,")");y.push({i:p-4,x:E(u,f)},{i:p-2,x:E(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=t(u),c=t(c),o(u.translateX,u.translateY,c.translateX,c.translateY,f,d),a(u.rotate,c.rotate,f,d),s(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(h){for(var y=-1,p=d.length,m;++y<p;)f[(m=d[y]).i]=m.x(h);return f.join("")}}}var Ya=hr(Xa,"px, ","px)","deg)"),Za=hr(Wa,", ",")",")"),lt=0,wt=0,vt=0,pr=1e3,Kt,St,Qt=0,K=0,le=0,Mt=typeof performance=="object"&&performance.now?performance:Date,yr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ue(){return K||(yr(Ja),K=Mt.now()+le)}function Ja(){K=0}function te(){this._call=this._time=this._next=null}te.prototype=mr.prototype={constructor:te,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ue():+n)+(e==null?0:+e),!this._next&&St!==this&&(St?St._next=this:Kt=this,St=this),this._call=t,this._time=n,be()},stop:function(){this._call&&(this._call=null,this._time=1/0,be())}};function mr(t,e,n){var r=new te;return r.restart(t,e,n),r}function Ka(){Ue(),++lt;for(var t=Kt,e;t;)(e=K-t._time)>=0&&t._call.call(void 0,e),t=t._next;--lt}function cn(){K=(Qt=Mt.now())+le,lt=wt=0;try{Ka()}finally{lt=0,ts(),K=0}}function Qa(){var t=Mt.now(),e=t-Qt;e>pr&&(le-=e,Qt=t)}function ts(){for(var t,e=Kt,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Kt=n);St=t,be(r)}function be(t){if(!lt){wt&&(wt=clearTimeout(wt));var e=t-K;e>24?(t<1/0&&(wt=setTimeout(cn,t-Mt.now()-le)),vt&&(vt=clearInterval(vt))):(vt||(Qt=Mt.now(),vt=setInterval(Qa,pr)),lt=1,yr(cn))}}function fn(t,e,n){var r=new te;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var es=De("start","end","cancel","interrupt"),ns=[],gr=0,dn=1,xe=2,Gt=3,hn=4,we=5,qt=6;function ue(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;rs(t,n,{name:e,index:r,group:i,on:es,tween:ns,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:gr})}function Xe(t,e){var n=I(t,e);if(n.state>gr)throw new Error("too late; already scheduled");return n}function z(t,e){var n=I(t,e);if(n.state>Gt)throw new Error("too late; already running");return n}function I(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function rs(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=mr(o,0,n.time);function o(u){n.state=dn,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,f,d,h;if(n.state!==dn)return l();for(c in r)if(h=r[c],h.name===n.name){if(h.state===Gt)return fn(a);h.state===hn?(h.state=qt,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete r[c]):+c<e&&(h.state=qt,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete r[c])}if(fn(function(){n.state===Gt&&(n.state=hn,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=xe,n.on.call("start",t,t.__data__,n.index,n.group),n.state===xe){for(n.state=Gt,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=we,1),f=-1,d=i.length;++f<d;)i[f].call(t,c);n.state===we&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=qt,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function is(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>xe&&r.state<we,r.state=qt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function os(t){return this.each(function(){is(this,t)})}function as(t,e){var n,r;return function(){var i=z(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function ss(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=z(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=s;break}l===u&&i.push(s)}o.tween=i}}function ls(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=I(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?as:ss)(n,t,e))}function We(t,e,n){var r=t._id;return t.each(function(){var i=z(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return I(i,r).value[e]}}function _r(t,e){var n;return(typeof e=="number"?E:e instanceof J?Jt:(n=J(e))?(e=n,Jt):fr)(t,e)}function us(t){return function(){this.removeAttribute(t)}}function cs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fs(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function ds(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function hs(t,e,n){var r,i,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s)))}}function ps(t,e,n){var r,i,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s)))}}function ys(t,e){var n=se(t),r=n==="transform"?Za:_r;return this.attrTween(t,typeof e=="function"?(n.local?ps:hs)(n,r,We(this,"attr."+t,e)):e==null?(n.local?cs:us)(n):(n.local?ds:fs)(n,r,e))}function ms(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function gs(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function _s(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&gs(t,o)),n}return i._value=e,i}function vs(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&ms(t,o)),n}return i._value=e,i}function bs(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=se(t);return this.tween(n,(r.local?_s:vs)(r,e))}function xs(t,e){return function(){Xe(this,t).delay=+e.apply(this,arguments)}}function ws(t,e){return e=+e,function(){Xe(this,t).delay=e}}function Ss(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?xs:ws)(e,t)):I(this.node(),e).delay}function Ls(t,e){return function(){z(this,t).duration=+e.apply(this,arguments)}}function Os(t,e){return e=+e,function(){z(this,t).duration=e}}function As(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ls:Os)(e,t)):I(this.node(),e).duration}function Ms(t,e){if(typeof e!="function")throw new Error;return function(){z(this,t).ease=e}}function Ns(t){var e=this._id;return arguments.length?this.each(Ms(e,t)):I(this.node(),e).ease}function Ps(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;z(this,t).ease=n}}function Ts(t){if(typeof t!="function")throw new Error;return this.each(Ps(this._id,t))}function Cs(t){typeof t!="function"&&(t=Kn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],l,u=0;u<a;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new H(r,this._parents,this._name,this._id)}function ks(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l=e[s],u=n[s],c=l.length,f=a[s]=new Array(c),d,h=0;h<c;++h)(d=l[h]||u[h])&&(f[h]=d);for(;s<r;++s)a[s]=e[s];return new H(a,this._parents,this._name,this._id)}function Es(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Rs(t,e,n){var r,i,o=Es(e)?Xe:z;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function js(t,e){var n=this._id;return arguments.length<2?I(this.node(),n).on.on(t):this.each(Rs(n,t,e))}function $s(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Is(){return this.on("end.remove",$s(this._id))}function Bs(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Fe(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],l=s.length,u=o[a]=new Array(l),c,f,d=0;d<l;++d)(c=s[d])&&(f=t.call(c,c.__data__,d,s))&&("__data__"in c&&(f.__data__=c.__data__),u[d]=f,ue(u[d],e,n,d,u,I(c,n)));return new H(o,this._parents,e,n)}function zs(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Jn(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l=r[s],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var d=t.call(c,c.__data__,f,l),h,y=I(c,n),p=0,m=d.length;p<m;++p)(h=d[p])&&ue(h,e,n,p,d,y);o.push(d),a.push(c)}return new H(o,a,e,n)}var Ds=kt.prototype.constructor;function Fs(){return new Ds(this._groups,this._parents)}function Vs(t,e){var n,r,i;return function(){var o=st(this,t),a=(this.style.removeProperty(t),st(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function vr(t){return function(){this.style.removeProperty(t)}}function Hs(t,e,n){var r,i=n+"",o;return function(){var a=st(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function Gs(t,e,n){var r,i,o;return function(){var a=st(this,t),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),st(this,t))),a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s))}}function qs(t,e){var n,r,i,o="style."+e,a="end."+o,s;return function(){var l=z(this,t),u=l.on,c=l.value[o]==null?s||(s=vr(e)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(a,i=c),l.on=r}}function Us(t,e,n){var r=(t+="")=="transform"?Ya:_r;return e==null?this.styleTween(t,Vs(t,r)).on("end.style."+t,vr(t)):typeof e=="function"?this.styleTween(t,Gs(t,r,We(this,"style."+t,e))).each(qs(this._id,t)):this.styleTween(t,Hs(t,r,e),n).on("end.style."+t,null)}function Xs(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Ws(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Xs(t,a,n)),r}return o._value=e,o}function Ys(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Ws(t,e,n??""))}function Zs(t){return function(){this.textContent=t}}function Js(t){return function(){var e=t(this);this.textContent=e??""}}function Ks(t){return this.tween("text",typeof t=="function"?Js(We(this,"text",t)):Zs(t==null?"":t+""))}function Qs(t){return function(e){this.textContent=t.call(this,e)}}function tl(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Qs(i)),e}return r._value=t,r}function el(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,tl(t))}function nl(){for(var t=this._name,e=this._id,n=br(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var c=I(l,e);ue(l,t,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new H(r,this._parents,t,n)}function rl(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--i===0&&o()}};n.each(function(){var u=z(this,r),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),u.on=e}),i===0&&o()})}var il=0;function H(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function br(){return++il}var F=kt.prototype;H.prototype={constructor:H,select:Bs,selectAll:zs,selectChild:F.selectChild,selectChildren:F.selectChildren,filter:Cs,merge:ks,selection:Fs,transition:nl,call:F.call,nodes:F.nodes,node:F.node,size:F.size,empty:F.empty,each:F.each,on:js,attr:ys,attrTween:bs,style:Us,styleTween:Ys,text:Ks,textTween:el,remove:Is,tween:ls,delay:Ss,duration:As,ease:Ns,easeVarying:Ts,end:rl,[Symbol.iterator]:F[Symbol.iterator]};function ol(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var al={time:null,delay:0,duration:250,ease:ol};function sl(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function ll(t){var e,n;t instanceof H?(e=t._id,t=t._name):(e=br(),(n=al).time=Ue(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&ue(l,t,e,u,a,n||sl(l,e));return new H(r,this._parents,t,e)}kt.prototype.interrupt=os;kt.prototype.transition=ll;function ul(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ee(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function ut(t){return t=ee(Math.abs(t)),t?t[1]:NaN}function cl(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function fl(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var dl=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ne(t){if(!(e=dl.exec(t)))throw new Error("invalid format: "+t);var e;return new Ye({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ne.prototype=Ye.prototype;function Ye(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ye.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function hl(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var xr;function pl(t,e){var n=ee(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(xr=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ee(t,Math.max(0,e+o-1))[0]}function pn(t,e){var n=ee(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const yn={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:ul,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>pn(t*100,e),r:pn,s:pl,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function mn(t){return t}var gn=Array.prototype.map,_n=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function yl(t){var e=t.grouping===void 0||t.thousands===void 0?mn:cl(gn.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?mn:fl(gn.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=ne(f);var d=f.fill,h=f.align,y=f.sign,p=f.symbol,m=f.zero,_=f.width,g=f.comma,v=f.precision,O=f.trim,L=f.type;L==="n"?(g=!0,L="g"):yn[L]||(v===void 0&&(v=12),O=!0,L="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var A=p==="$"?n:p==="#"&&/[boxX]/.test(L)?"0"+L.toLowerCase():"",nt=p==="$"?r:/[%p]/.test(L)?a:"",k=yn[L],b=/[defgprs%]/.test(L);v=v===void 0?6:/[gprs]/.test(L)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function w(x){var N=A,C=nt,rt,Ze,Rt;if(L==="c")C=k(x)+C,x="";else{x=+x;var jt=x<0||1/x<0;if(x=isNaN(x)?l:k(Math.abs(x),v),O&&(x=hl(x)),jt&&+x==0&&y!=="+"&&(jt=!1),N=(jt?y==="("?y:s:y==="-"||y==="("?"":y)+N,C=(L==="s"?_n[8+xr/3]:"")+C+(jt&&y==="("?")":""),b){for(rt=-1,Ze=x.length;++rt<Ze;)if(Rt=x.charCodeAt(rt),48>Rt||Rt>57){C=(Rt===46?i+x.slice(rt+1):x.slice(rt))+C,x=x.slice(0,rt);break}}}g&&!m&&(x=e(x,1/0));var $t=N.length+x.length+C.length,D=$t<_?new Array(_-$t+1).join(d):"";switch(g&&m&&(x=e(D+x,D.length?_-C.length:1/0),D=""),h){case"<":x=N+x+C+D;break;case"=":x=N+D+x+C;break;case"^":x=D.slice(0,$t=D.length>>1)+N+x+C+D.slice($t);break;default:x=D+N+x+C;break}return o(x)}return w.toString=function(){return f+""},w}function c(f,d){var h=u((f=ne(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(ut(d)/3)))*3,p=Math.pow(10,-y),m=_n[8+y/3];return function(_){return h(p*_)+m}}return{format:u,formatPrefix:c}}var Ft,wr,Sr;ml({thousands:",",grouping:[3],currency:["$",""]});function ml(t){return Ft=yl(t),wr=Ft.format,Sr=Ft.formatPrefix,Ft}function gl(t){return Math.max(0,-ut(Math.abs(t)))}function _l(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ut(e)/3)))*3-ut(Math.abs(t)))}function vl(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ut(e)-ut(t))+1}function bl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function xl(t){return function(){return t}}function wl(t){return+t}var vn=[0,1];function ot(t){return t}function Se(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:xl(isNaN(e)?NaN:.5)}function Sl(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Ll(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Se(i,r),o=n(a,o)):(r=Se(r,i),o=n(o,a)),function(s){return o(r(s))}}function Ol(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Se(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var l=Ei(t,s,1,r)-1;return o[l](i[l](s))}}function Al(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ml(){var t=vn,e=vn,n=qe,r,i,o,a=ot,s,l,u;function c(){var d=Math.min(t.length,e.length);return a!==ot&&(a=Sl(t[0],t[d-1])),s=d>2?Ol:Ll,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?o:(l||(l=s(t.map(r),e,n)))(r(a(d)))}return f.invert=function(d){return a(i((u||(u=s(e,t.map(r),E)))(d)))},f.domain=function(d){return arguments.length?(t=Array.from(d,wl),c()):t.slice()},f.range=function(d){return arguments.length?(e=Array.from(d),c()):e.slice()},f.rangeRound=function(d){return e=Array.from(d),n=Ua,c()},f.clamp=function(d){return arguments.length?(a=d?!0:ot,c()):a!==ot},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return r=d,i=h,c()}}function Nl(){return Ml()(ot,ot)}function Pl(t,e,n,r){var i=zi(t,e,n),o;switch(r=ne(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=_l(i,a))&&(r.precision=o),Sr(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=vl(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=gl(i))&&(r.precision=o-(r.type==="%")*2);break}}return wr(r)}function Tl(t){var e=t.domain;return t.ticks=function(n){var r=e();return Bi(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Pl(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],l,u,c=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);c-- >0;){if(u=ye(a,s,n),u===l)return r[i]=a,r[o]=s,e(r);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function Le(){var t=Nl();return t.copy=function(){return Al(t,Le())},bl.apply(t,arguments),Tl(t)}function Lt(t,e,n){this.k=t,this.x=e,this.y=n}Lt.prototype={constructor:Lt,scale:function(t){return t===1?this:new Lt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Lt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Lt.prototype;var it=Math.PI/3,Cl=[0,it,2*it,3*it,4*it,5*it];function kl(t){return t[0]}function El(t){return t[1]}function Rl(){var t=0,e=0,n=1,r=1,i=kl,o=El,a,s,l;function u(f){var d={},h=[],y,p=f.length;for(y=0;y<p;++y)if(!(isNaN(_=+i.call(null,m=f[y],y,f))||isNaN(g=+o.call(null,m,y,f)))){var m,_,g,v=Math.round(g=g/l),O=Math.round(_=_/s-(v&1)/2),L=g-v;if(Math.abs(L)*3>1){var A=_-O,nt=O+(_<O?-1:1)/2,k=v+(g<v?-1:1),b=_-nt,w=g-k;A*A+L*L>b*b+w*w&&(O=nt+(v&1?1:-1)/2,v=k)}var x=O+"-"+v,N=d[x];N?N.push(m):(h.push(N=d[x]=[m]),N.x=(O+(v&1)/2)*s,N.y=v*l)}return h}function c(f){var d=0,h=0;return Cl.map(function(y){var p=Math.sin(y)*f,m=-Math.cos(y)*f,_=p-d,g=m-h;return d=p,h=m,[_,g]})}return u.hexagon=function(f){return"m"+c(f==null?a:+f).join("l")+"z"},u.centers=function(){for(var f=[],d=Math.round(e/l),h=Math.round(t/s),y=d*l;y<r+a;y+=l,++d)for(var p=h*s+(d&1)*s/2;p<n+s/2;p+=s)f.push([p,y]);return f},u.mesh=function(){var f=c(a).slice(0,4).join("l");return u.centers().map(function(d){return"M"+d+"m"+f}).join("")},u.x=function(f){return arguments.length?(i=f,u):i},u.y=function(f){return arguments.length?(o=f,u):o},u.radius=function(f){return arguments.length?(a=+f,s=a*2*Math.sin(it),l=a*1.5,u):a},u.size=function(f){return arguments.length?(t=e=0,n=+f[0],r=+f[1],u):[n-t,r-e]},u.extent=function(f){return arguments.length?(t=+f[0][0],e=+f[0][1],n=+f[1][0],r=+f[1][1],u):[[t,e],[n,r]]},u.radius(1)}var Oe;(t=>{function e(a={tooltipContent(s){return`Count: ${s.length}`}}){const s=q("body").append("div").attr("class","hexbin-tooltip").style("z-index",9999).style("pointer-events","none").style("visibility","hidden").style("position","fixed");return s.append("div").attr("class","tooltip-content"),{mouseover:function(l,u,c,f){const d=Sa(c);s.style("visibility","visible").html(a.tooltipContent(f,u));const h=s.node();if(!h){console.warn("Leaflet hexbin: tooltip node not found");return}const y=h.clientHeight,p=h.clientWidth;s.style("top",c.clientY-d[1]-y-16+"px").style("left",c.clientX-d[0]-p/2+"px")},mouseout:function(l,u,c,f){s.style("visibility","hidden").html()}}}t.tooltip=e;function n(){return{mouseover:function(a,s,l,u){q(a.parentElement).select("path.hexbin-hexagon").attr("d",function(f){return s._hexLayout.hexagon(s.options.radius)})},mouseout:function(a,s,l,u){q(a.parentElement).select("path.hexbin-hexagon").attr("d",function(f){return s._hexLayout.hexagon(s._scale.radius(s._fn.radiusValue.call(s,f)))})}}}t.resizeFill=n;function r(a=1.5){return{mouseover:function(s,l,u,c){q(s.parentElement).select("path.hexbin-hexagon").transition().duration(l.options.duration).attr("d",function(){return l._hexLayout.hexagon(l._scale.radius.range()[1]*a)})},mouseout:function(s,l,u,c){q(s.parentElement).select("path.hexbin-hexagon").transition().duration(l.options.duration).attr("d",d=>l._hexLayout.hexagon(l._scale.radius(l._fn.radiusValue.call(l,d))))}}}t.resizeScale=r;function i(a=[o()]){return{mouseover:function(s,l,u,c){a.forEach(f=>{f.mouseover(s,l,u,c)})},mouseout:function(s,l,u,c){a.forEach(f=>{f.mouseout(s,l,u,c)})}}}t.compound=i;function o(){return{mouseover:function(){},mouseout:function(){}}}t.none=o})(Oe||(Oe={}));const Ae=Oe;class Lr extends P.SVG{constructor(e){super(),this.options={radius:12,opacity:.6,duration:200,colorScaleExtent:[1,void 0],radiusScaleExtent:[1,void 0],colorDomain:null,radiusDomain:null,colorRange:["#f7fbff","#08306b"],radiusRange:[4,12],pointerEvents:"all",...P.Renderer.prototype.options,...P.Layer.prototype.options},this._fn={lng:n=>P.latLng(n).lng,lat:n=>P.latLng(n).lat,colorValue:n=>n.length,radiusValue:n=>Number.MAX_VALUE,fill:n=>{const r=this._fn.colorValue(n);return r!=null?this._scale.color(r):"none"}},this._scale={color:Le(),radius:Le()},this._dispatch=De("mouseover","mouseout","click"),this._hoverHandler=Ae.none(),this._hexLayout=Rl().radius(this.options.radius).x(({point:[n,r]})=>n).y(({point:[n,r]})=>r),this._data=Array(),this.options={...this.options,...e},this._scale.color.range(this.options.colorRange).clamp(!0),this._scale.radius.range(this.options.radiusRange).clamp(!0)}_initContainer(){super._initContainer(),this._d3Container=q(this._container).select("g")}onAdd(e){return super.onAdd(e),this._map=e,e.on("moveend",this.redraw,this),this.redraw(),this}_project(e){const{x:n,y:r}=this._map.latLngToLayerPoint(e);return[n,r]}onRemove(e){return this._destroyContainer(),e.off("moveend",this.redraw,this),this}_destroyContainer(){q(this._container).remove()}redraw(){const e=this;if(!e._map)return;const n=e._data.map(a=>{const s=e._project(a);return{o:a,point:s}}),r=this._d3Container.selectAll("g.hexbin").data([this._map.getZoom()],a=>a),o=r.enter().append("g").attr("class",function(a){return"hexbin zoom-"+a}).merge(r);r.exit().remove(),this._createHexagons(o,n)}_linearlySpace(e,n,r){const i=(n-e)/Math.max(r-1,1);return Array.from({length:r},(o,a)=>e+a*i)}_createHexagons(e,n){const r=this,i=r._map.getSize(),o=r._map.getBounds().pad(r.options.radius*2/Math.max(i.x,i.y)),a=r._hexLayout(n).filter(({x:p,y:m})=>o.contains(r._map.layerPointToLatLng(P.point(p,m)))),s=r._getExtent(a,r._fn.colorValue,r.options.colorScaleExtent),l=r._getExtent(a,r._fn.radiusValue,r.options.radiusScaleExtent),u=this.options.colorDomain??r._linearlySpace(s[0],s[1],r._scale.color.range().length),c=this.options.radiusDomain||l;r._scale.color.domain(u),r._scale.radius.domain(c);const f=e.selectAll("g.hexbin-container").data(a,({x:p,y:m})=>`${p}:${m}`);f.select("path.hexbin-hexagon").transition().duration(r.options.duration).attr("fill",r._fn.fill.bind(r)).attr("fill-opacity",r.options.opacity).attr("stroke-opacity",r.options.opacity).attr("d",p=>r._hexLayout.hexagon(r._scale.radius(r._fn.radiusValue.call(r,p))));const d=f.enter().append("g").attr("class","hexbin-container").style("pointer-events",r.options.pointerEvents);d.on("mouseover",function(p,m){q(this).raise()});const h=d.append("path").attr("class","hexbin-hexagon").attr("transform",({x:p,y:m})=>`translate(${p},${m})`).attr("d",()=>r._hexLayout.hexagon(r._scale.radius.range()[0])).attr("fill",r._fn.fill.bind(r)).attr("fill-opacity",.01).attr("stroke-opacity",.01).style("pointer-events","all");h.transition().duration(r.options.duration).attr("fill-opacity",r.options.opacity).attr("stroke-opacity",r.options.opacity).attr("d",p=>r._hexLayout.hexagon(r._scale.radius(r._fn.radiusValue.call(r,p)))).style("pointer-events","all"),d.append("path").attr("class","hexbin-grid").attr("transform",({x:p,y:m})=>`translate(${p},${m})`).attr("d",()=>r._hexLayout.hexagon(r.options.radius)).attr("fill","none").attr("stroke","none"),h.on("mouseover",function(p,m){r._hoverHandler.mouseover(this,r,p,m),r._dispatch.call("mouseover",this,p,m),this.classList.add("hover")}).on("mouseout",function(p,m){r._hoverHandler.mouseout(this,r,p,m),r._dispatch.call("mouseout",this,r,p,m),this.classList.remove("hover")}).on("click",function(p,m){r._dispatch.call("click",this,r,p,m)});const y=f.exit();y.select("path.hexbin-hexagon").transition().duration(r.options.duration).attr("fill-opacity",0).attr("stroke-opacity",0).attr("d",p=>r._hexLayout.hexagon(0)),y.transition().duration(r.options.duration).remove()}_getExtent(e,n,r){let i=Ri(e,n.bind(this));return(i[0]===void 0||i[1]===void 0)&&(i=[0,0]),r[0]!=null&&(i[0]=r[0]),r[1]!=null&&(i[1]=r[1]),i}radius(e){return e===void 0?this.options.radius:(this.options.radius=e,this._hexLayout.radius(e),this)}opacity(e){return e===void 0?this.options.opacity:(this.options.opacity=e,this)}duration(e){return e===void 0?this.options.duration:(this.options.duration=e,this)}colorScaleExtent(e){return e===void 0?this.options.colorScaleExtent:(this.options.colorScaleExtent=e,this)}radiusScaleExtent(e){return e===void 0?this.options.radiusScaleExtent:(this.options.radiusScaleExtent=e,this)}colorRange(e){return e===void 0?this.options.colorRange:(this.options.colorRange=e,this._scale.color.range(e),this)}radiusRange(e){return e===void 0?this.options.radiusRange:(this.options.radiusRange=e,this._scale.radius.range(e),this)}colorScale(e){return e===void 0?this._scale.color:(this._scale.color=e,this)}radiusScale(e){return e===void 0?this._scale.radius:(this._scale.radius=e,this)}lng(e){return e===void 0?this._fn.lng:(this._fn.lng=e,this)}lat(e){return e===void 0?this._fn.lat:(this._fn.lat=e,this)}colorValue(e){return e===void 0?this._fn.colorValue:(this._fn.colorValue=e,this)}radiusValue(e){return e===void 0?this._fn.radiusValue:(this._fn.radiusValue=e,this)}fill(e){return e===void 0?this._fn.fill:(this._fn.fill=e,this)}data(e){return e===void 0?this._data:(this._data=e??[],this.redraw(),this)}dispatch(){return this._dispatch}hoverHandler(e){return e===void 0?this._hoverHandler:(this._hoverHandler=e??Ae.none(),this.redraw(),this)}getLatLngs(){const e=this;return this._data.map(function(n){return P.latLng(e._fn.lat(n),e._fn.lng(n))})}toGeoJSON(){return P.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:P.GeoJSON.latLngsToCoords(this.getLatLngs(),0)})}}function jl(t){return new Lr(t)}console.log(Object.isExtensible(P));P.extend(P,{HexbinLayer:Lr,HexbinHoverHandler:Ae,hexbinLayer:jl});window.L=P;const{propsToLeafletOptions:$l}=Sn,{featureGroupProps:Il,setupFeatureGroup:Bl}=Wn.FeatureGroup,Or={...Il,hoverHandler:{type:Object},data:{type:Array},radius:{type:Number},opacity:{type:Number},duration:{type:Number},colorScaleExtent:{type:Array},radiusScaleExtent:{type:Array},colorRange:{type:Array},radiusRange:{type:Array}},zl=(t,e,n)=>{const{options:r,methods:i}=Bl(t,e,n),o=$l(t,Or,r),a={...i,setRadius(s){var l;console.log("set radius"),(l=e.value)==null||l.radius(s).redraw()},setDuration(s){var l;(l=e.value)==null||l.duration(s)},setOpacity(s){var l;(l=e.value)==null||l.opacity(s)},setColorScaleExtent(s){var l;(l=e.value)==null||l.colorScaleExtent(s)},setRadiusScaleExtent(s){var l;(l=e.value)==null||l.radiusScaleExtent(s)},setColorRange(s){var l;(l=e.value)==null||l.colorRange(s)},setRadiusRange(s){var l;(l=e.value)==null||l.radiusRange(s)},setData(s){var l;(l=e.value)==null||l.data(s)}};return{options:o,methods:a}},Hl=ct({__name:"LHexbinLayer",props:Or,emits:["ready","mouseover","mouseout","click"],setup(t,{emit:e}){const{propsBinder:n,assertInject:r,WINDOW_OR_GLOBAL:i}=Sn,{render:o}=Wn.Layer,a=t,s=Nr(),l=Pr(),u=e,c={attrs:s,slots:l,emit:u,expose:()=>{}},f=["mouseover","mouseout","click"],d=j(),h=j(!1),y=r(Rr.AddLayerInjection),{methods:p,options:m}=zl(a,d,c);ft(async()=>{d.value=Nt(i.L.hexbinLayer(m)),d.value.data(a.data??[]),de(()=>a.hoverHandler,g=>{d.value&&g&&d.value.hoverHandler(g)},{immediate:!0}),f.forEach(g=>{d.value.dispatch().on(g,(v,O)=>{u(g,v,O)})}),n(p,d.value,a),y({...a,...p,leafletObject:d.value}),h.value=!0,Z(()=>c.emit("ready",d.value))});const _=o(h.value,l);return(g,v)=>(Cr(),Tr(kr(Er(_))))}});export{Ae as H,Hl as _,Fl as i,Vl as v};
//# sourceMappingURL=LHexbinLayer.vue_vue_type_script_setup_true_lang-CveqphTW.js.map
