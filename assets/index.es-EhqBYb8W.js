import{d as ce,h as Q,r as E,i as Ar,p as U,b as Be,j as fe,_ as H,m as Me,n as W,k as At,l as pt,q as je,s as $t,v as $r,x as Mr,y as jr,z as Pr,o as Nr,A as Cr,u as Tr}from"./index-1EAYQNEl.js";import*as j from"leaflet";const ht=(e,t)=>{for(const n of Object.keys(t))e.on(n,t[n])},_n=e=>{for(const t of Object.keys(e)){const n=e[t];n&&q(n.cancel)&&n.cancel()}},bn=e=>!e||typeof e.charAt!="function"?e:e.charAt(0).toUpperCase()+e.slice(1),q=e=>typeof e=="function",pe=(e,t,n)=>{for(const r in n){const o="set"+bn(r);e[o]?pt(()=>n[r],(i,a)=>{e[o](i,a)}):t[o]&&pt(()=>n[r],i=>{t[o](i)})}},S=(e,t,n={})=>{const r={...n};for(const o in e){const i=t[o],a=e[o];i&&(i&&i.custom===!0||a!==void 0&&(r[o]=a))}return r},Pe=e=>{const t={},n={};for(const r in e)if(r.startsWith("on")&&!r.startsWith("onUpdate")&&r!=="onReady"){const o=r.slice(2).toLocaleLowerCase();t[o]=e[r]}else n[r]=e[r];return{listeners:t,attrs:n}},wn=async e=>{const t=await Promise.all([H(()=>import("leaflet/dist/images/marker-icon-2x.png"),[]),H(()=>import("leaflet/dist/images/marker-icon.png"),[]),H(()=>import("leaflet/dist/images/marker-shadow.png"),[])]);delete e.Default.prototype._getIconUrl,e.Default.mergeOptions({iconRetinaUrl:t[0].default,iconUrl:t[1].default,shadowUrl:t[2].default})},be=e=>{const t=E((...r)=>console.warn(`Method ${e} has been invoked without being replaced`)),n=(...r)=>t.value(...r);return n.wrapped=t,U(e,n),n},we=(e,t)=>e.wrapped.value=t,F=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,R=e=>{const t=je(e);if(t===void 0)throw new Error(`Attempt to inject ${e.description} before it was provided.`);return t},xn=Object.freeze(Object.defineProperty({__proto__:null,WINDOW_OR_GLOBAL:F,assertInject:R,bindEventHandlers:ht,cancelDebounces:_n,capitalizeFirstLetter:bn,isFunction:q,propsBinder:pe,propsToLeafletOptions:S,provideLeafletWrapper:be,remapEvents:Pe,resetWebpackIcon:wn,updateLeafletWrapper:we},Symbol.toStringTag,{value:"Module"})),he=Symbol("useGlobalLeaflet"),de=Symbol("addLayer"),Ne=Symbol("removeLayer"),Mt=Symbol("registerControl"),Sn=Symbol("registerLayerControl"),On=Symbol("canSetParentHtml"),Ln=Symbol("setParentHtml"),An=Symbol("setIcon"),$n=Symbol("bindPopup"),Mn=Symbol("bindTooltip"),jn=Symbol("unbindPopup"),jt=Symbol("unbindTooltip"),kr=Object.freeze(Object.defineProperty({__proto__:null,AddLayerInjection:de,BindPopupInjection:$n,BindTooltipInjection:Mn,CanSetParentHtmlInjection:On,RegisterControlInjection:Mt,RegisterLayerControlInjection:Sn,RemoveLayerInjection:Ne,SetIconInjection:An,SetParentHtmlInjection:Ln,UnbindPopupInjection:jn,UnbindTooltipInjection:jt,UseGlobalLeafletInjection:he},Symbol.toStringTag,{value:"Module"})),ye={options:{type:Object,default:()=>({}),custom:!0}},me=e=>({options:e.options,methods:{}}),Er=Object.freeze(Object.defineProperty({__proto__:null,componentProps:ye,setupComponent:me},Symbol.toStringTag,{value:"Module"})),ee={...ye,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},ge=(e,t,n)=>{const r=R(de),o=R(Ne),{options:i,methods:a}=me(e),u=S(e,ee,i),s=()=>r({leafletObject:t.value}),l=()=>o({leafletObject:t.value}),f={...a,setAttribution(c){l(),t.value.options.attribution=c,e.visible&&s()},setName(){l(),e.visible&&s()},setLayerType(){l(),e.visible&&s()},setVisible(c){t.value&&(c?s():l())},bindPopup(c){if(!t.value||!q(t.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}t.value.bindPopup(c)},bindTooltip(c){if(!t.value||!q(t.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}t.value.bindTooltip(c)},unbindTooltip(){t.value&&(q(t.value.closeTooltip)&&t.value.closeTooltip(),q(t.value.unbindTooltip)&&t.value.unbindTooltip())},unbindPopup(){t.value&&(q(t.value.closePopup)&&t.value.closePopup(),q(t.value.unbindPopup)&&t.value.unbindPopup())},updateVisibleProp(c){n.emit("update:visible",c)}};return U($n,f.bindPopup),U(Mn,f.bindTooltip),U(jn,f.unbindPopup),U(jt,f.unbindTooltip),$t(()=>{f.unbindPopup(),f.unbindTooltip(),l()}),{options:u,methods:f}},Rr=(e,t)=>{if(e&&t.default)return Q("div",{style:{display:"none"}},t.default())},Br=Object.freeze(Object.defineProperty({__proto__:null,layerProps:ee,render:Rr,setupLayer:ge},Symbol.toStringTag,{value:"Module"})),Pt={...ee,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},Pn=(e,t,n)=>{const{options:r,methods:o}=ge(e,t,n);return{options:S(e,Pt,r),methods:o}},Ir=Object.freeze(Object.defineProperty({__proto__:null,interactiveLayerProps:Pt,setupInteractiveLayer:Pn},Symbol.toStringTag,{value:"Module"})),rt={...Pt,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},Nt=(e,t,n)=>{const{options:r,methods:o}=Pn(e,t,n),i=S(e,rt,r),a=R(Ne),u={...o,setStroke(s){t.value.setStyle({stroke:s})},setColor(s){t.value.setStyle({color:s})},setWeight(s){t.value.setStyle({weight:s})},setOpacity(s){t.value.setStyle({opacity:s})},setLineCap(s){t.value.setStyle({lineCap:s})},setLineJoin(s){t.value.setStyle({lineJoin:s})},setDashArray(s){t.value.setStyle({dashArray:s})},setDashOffset(s){t.value.setStyle({dashOffset:s})},setFill(s){t.value.setStyle({fill:s})},setFillColor(s){t.value.setStyle({fillColor:s})},setFillOpacity(s){t.value.setStyle({fillOpacity:s})},setFillRule(s){t.value.setStyle({fillRule:s})},setClassName(s){t.value.setStyle({className:s})}};return At(()=>{a({leafletObject:t.value})}),{options:i,methods:u}},zr=Object.freeze(Object.defineProperty({__proto__:null,pathProps:rt,setupPath:Nt},Symbol.toStringTag,{value:"Module"})),Ct={...rt,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}},Nn=(e,t,n)=>{const{options:r,methods:o}=Nt(e,t,n),i=S(e,Ct,r),a={...o,setRadius(u){t.value.setRadius(u)},setLatLng(u){t.value.setLatLng(u)}};return{options:i,methods:a}},Dr=Object.freeze(Object.defineProperty({__proto__:null,circleMarkerProps:Ct,setupCircleMarker:Nn},Symbol.toStringTag,{value:"Module"})),Cn={...Ct,radius:{type:Number}},Vr=(e,t,n)=>{const{options:r,methods:o}=Nn(e,t,n),i=S(e,Cn,r),a={...o};return{options:i,methods:a}},Hr=Object.freeze(Object.defineProperty({__proto__:null,circleProps:Cn,setupCircle:Vr},Symbol.toStringTag,{value:"Module"})),te={...ye,position:{type:String}},ve=(e,t)=>{const{options:n,methods:r}=me(e),o=S(e,te,n),i={...r,setPosition(a){t.value&&t.value.setPosition(a)}};return $t(()=>{t.value&&t.value.remove()}),{options:o,methods:i}},Tn=e=>e.default?Q("div",{ref:"root"},e.default()):null,Gr=Object.freeze(Object.defineProperty({__proto__:null,controlProps:te,renderLControl:Tn,setupControl:ve},Symbol.toStringTag,{value:"Module"}));ce({name:"LControl",props:{...te,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(e,t){const n=E(),r=E(),o=je(he),i=R(Mt),{options:a,methods:u}=ve(e,n);return fe(async()=>{const{Control:s,DomEvent:l}=o?F.L:await H(()=>import("leaflet/dist/leaflet-src.esm"),[]),f=s.extend({onAdd(){return r.value}});n.value=Me(new f(a)),pe(u,n.value,e),i({leafletObject:n.value}),e.disableClickPropagation&&r.value&&l.disableClickPropagation(r.value),e.disableScrollPropagation&&r.value&&l.disableScrollPropagation(r.value),W(()=>t.emit("ready",n.value))}),{root:r,leafletObject:n}},render(){return Tn(this.$slots)}});const kn={...te,prefix:{type:String}},qr=(e,t)=>{const{options:n,methods:r}=ve(e,t),o=S(e,kn,n),i={...r,setPrefix(a){t.value.setPrefix(a)}};return{options:o,methods:i}},Ur=Object.freeze(Object.defineProperty({__proto__:null,controlAttributionProps:kn,setupControlAttribution:qr},Symbol.toStringTag,{value:"Module"})),En={...te,collapsed:{type:Boolean,default:void 0},autoZIndex:{type:Boolean,default:void 0},hideSingleBase:{type:Boolean,default:void 0},sortLayers:{type:Boolean,default:void 0},sortFunction:{type:Function}},Fr=(e,t)=>{const{options:n}=ve(e,t);return{options:S(e,En,n),methods:{addLayer(r){r.layerType==="base"?t.value.addBaseLayer(r.leafletObject,r.name):r.layerType==="overlay"&&t.value.addOverlay(r.leafletObject,r.name)},removeLayer(r){t.value.removeLayer(r.leafletObject)}}}},Xr=Object.freeze(Object.defineProperty({__proto__:null,controlLayersProps:En,setupControlLayers:Fr},Symbol.toStringTag,{value:"Module"})),Rn={...te,maxWidth:{type:Number},metric:{type:Boolean,default:void 0},imperial:{type:Boolean,default:void 0},updateWhenIdle:{type:Boolean,default:void 0}},Yr=(e,t)=>{const{options:n,methods:r}=ve(e,t);return{options:S(e,Rn,n),methods:r}},Zr=Object.freeze(Object.defineProperty({__proto__:null,controlScaleProps:Rn,setupControlScale:Yr},Symbol.toStringTag,{value:"Module"})),Bn={...te,zoomInText:{type:String},zoomInTitle:{type:String},zoomOutText:{type:String},zoomOutTitle:{type:String}},Wr=(e,t)=>{const{options:n,methods:r}=ve(e,t);return{options:S(e,Bn,n),methods:r}},Jr=Object.freeze(Object.defineProperty({__proto__:null,controlZoomProps:Bn,setupControlZoom:Wr},Symbol.toStringTag,{value:"Module"})),ot={...ee},Tt=(e,t,n)=>{const{options:r,methods:o}=ge(e,t,n),i=S(e,ot,r),a={...o,addLayer(u){t.value.addLayer(u.leafletObject)},removeLayer(u){t.value.removeLayer(u.leafletObject)}};return U(de,a.addLayer),U(Ne,a.removeLayer),{options:i,methods:a}},Kr=Object.freeze(Object.defineProperty({__proto__:null,layerGroupProps:ot,setupLayerGroup:Tt},Symbol.toStringTag,{value:"Module"})),In={...ot},Qr=(e,t,n)=>{const{options:r,methods:o}=Tt(e,t,n),i=S(e,In,r),a={...o};return{options:i,methods:a}},eo=Object.freeze(Object.defineProperty({__proto__:null,featureGroupProps:In,setupFeatureGroup:Qr},Symbol.toStringTag,{value:"Module"})),zn={...ot,geojson:{type:[Object,Array],custom:!0},optionsStyle:{type:Function,custom:!0}},to=(e,t,n)=>{const{options:r,methods:o}=Tt(e,t,n),i=S(e,zn,r);Object.prototype.hasOwnProperty.call(e,"optionsStyle")&&(i.style=e.optionsStyle);const a={...o,setGeojson(u){t.value.clearLayers(),t.value.addData(u)},setOptionsStyle(u){t.value.setStyle(u)},getGeoJSONData(){return t.value.toGeoJSON()},getBounds(){return t.value.getBounds()}};return{options:i,methods:a}},no=Object.freeze(Object.defineProperty({__proto__:null,geoJSONProps:zn,setupGeoJSON:to},Symbol.toStringTag,{value:"Module"})),it={...ee,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},kt=(e,t,n)=>{const{options:r,methods:o}=ge(e,t,n),i=S(e,it,r),a={...o,setTileComponent(){var u;(u=t.value)==null||u.redraw()}};return $t(()=>{t.value.off()}),{options:i,methods:a}},Dn=(e,t,n,r)=>e.extend({initialize(o){this.tileComponents={},this.on("tileunload",this._unloadTile),n.setOptions(this,o)},createTile(o){const i=this._tileCoordsToKey(o);this.tileComponents[i]=t.create("div");const a=Q({setup:r,props:["coords"]},{coords:o});return $r(a,this.tileComponents[i]),this.tileComponents[i]},_unloadTile(o){const i=this._tileCoordsToKey(o.coords);this.tileComponents[i]&&(this.tileComponents[i].innerHTML="",this.tileComponents[i]=void 0)}}),ro=Object.freeze(Object.defineProperty({__proto__:null,CreateVueGridLayer:Dn,gridLayerProps:it,setupGridLayer:kt},Symbol.toStringTag,{value:"Module"}));ce({props:{...it,childRender:{type:Function,required:!0}},setup(e,t){const n=E(),r=E(null),o=E(!1),i=je(he),a=R(de),{options:u,methods:s}=kt(e,n,t);return fe(async()=>{const{GridLayer:l,DomUtil:f,Util:c}=i?F.L:await H(()=>import("leaflet/dist/leaflet-src.esm"),[]),p=Dn(l,f,c,e.childRender);n.value=Me(new p(u));const{listeners:h}=Pe(t.attrs);n.value.on(h),pe(s,n.value,e),a({...e,...s,leafletObject:n.value}),o.value=!0,W(()=>t.emit("ready",n.value))}),{root:r,ready:o,leafletObject:n}},render(){return this.ready?Q("div",{style:{display:"none"},ref:"root"}):null}});const dt={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}},oo=Object.freeze(Object.defineProperty({__proto__:null,iconProps:dt},Symbol.toStringTag,{value:"Module"}));ce({name:"LIcon",props:{...dt,...ye},setup(e,t){const n=E(),r=je(he),o=R(On),i=R(Ln),a=R(An);let u,s,l,f,c;const p=(m,g,b)=>{const w=m&&m.innerHTML;if(!g){b&&c&&o()&&i(w);return}const{listeners:L}=Pe(t.attrs);c&&s(c,L);const{options:O}=me(e),A=S(e,dt,O);w&&(A.html=w),c=A.html?l(A):f(A),u(c,L),a(c)},h=()=>{W(()=>p(n.value,!0,!1))},d=()=>{W(()=>p(n.value,!1,!0))},y={setIconUrl:h,setIconRetinaUrl:h,setIconSize:h,setIconAnchor:h,setPopupAnchor:h,setTooltipAnchor:h,setShadowUrl:h,setShadowRetinaUrl:h,setShadowAnchor:h,setBgPos:h,setClassName:h,setHtml:h};return fe(async()=>{const{DomEvent:m,divIcon:g,icon:b}=r?F.L:await H(()=>import("leaflet/dist/leaflet-src.esm"),[]);u=m.on,s=m.off,l=g,f=b,pe(y,{},e),new MutationObserver(d).observe(n.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),h()}),{root:n}},render(){const e=this.$slots.default?this.$slots.default():void 0;return Q("div",{ref:"root"},e)}});const Vn={...ee,opacity:{type:Number},alt:{type:String},interactive:{type:Boolean,default:void 0},crossOrigin:{type:Boolean,default:void 0},errorOverlayUrl:{type:String},zIndex:{type:Number},className:{type:String},url:{type:String,required:!0,custom:!0},bounds:{type:[Array,Object],required:!0,custom:!0}},io=(e,t,n)=>{const{options:r,methods:o}=ge(e,t,n),i=S(e,Vn,r),a={...o,setOpacity(u){return t.value.setOpacity(u)},setUrl(u){return t.value.setUrl(u)},setBounds(u){return t.value.setBounds(u)},getBounds(){return t.value.getBounds()},getElement(){return t.value.getElement()},bringToFront(){return t.value.bringToFront()},bringToBack(){return t.value.bringToBack()},setZIndex(u){return t.value.setZIndex(u)}};return{options:i,methods:a}},ao=Object.freeze(Object.defineProperty({__proto__:null,imageOverlayProps:Vn,setupImageOverlay:io},Symbol.toStringTag,{value:"Module"}));function uo(e,t,n){var r,o,i;t===void 0&&(t=50),n===void 0&&(n={});var a=(r=n.isImmediate)!=null&&r,u=(o=n.callback)!=null&&o,s=n.maxWait,l=Date.now(),f=[];function c(){if(s!==void 0){var h=Date.now()-l;if(h+t>=s)return s-h}return t}var p=function(){var h=[].slice.call(arguments),d=this;return new Promise(function(y,m){var g=a&&i===void 0;if(i!==void 0&&clearTimeout(i),i=setTimeout(function(){if(i=void 0,l=Date.now(),!a){var w=e.apply(d,h);u&&u(w),f.forEach(function(L){return(0,L.resolve)(w)}),f=[]}},c()),g){var b=e.apply(d,h);return u&&u(b),y(b)}f.push({resolve:y,reject:m})})};return p.cancel=function(h){i!==void 0&&clearTimeout(i),f.forEach(function(d){return(0,d.reject)(h)}),f=[]},p}const Wt={...ye,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},Vs=ce({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:Wt,setup(e,t){const n=E(),r=Ar({ready:!1,layersToAdd:[],layersInControl:[]}),{options:o}=me(e),i=S(e,Wt,o),{listeners:a,attrs:u}=Pe(t.attrs),s=be(de),l=be(Ne),f=be(Mt),c=be(Sn);U(he,e.useGlobalLeaflet);const p=Be(()=>{const g={};return e.noBlockingAnimations&&(g.animate=!1),g}),h=Be(()=>{const g=p.value;return e.padding&&(g.padding=e.padding),e.paddingTopLeft&&(g.paddingTopLeft=e.paddingTopLeft),e.paddingBottomRight&&(g.paddingBottomRight=e.paddingBottomRight),g}),d={moveend:uo(g=>{r.leafletRef&&(t.emit("update:zoom",r.leafletRef.getZoom()),t.emit("update:center",r.leafletRef.getCenter()),t.emit("update:bounds",r.leafletRef.getBounds()))}),overlayadd(g){const b=r.layersInControl.find(w=>w.name===g.name);b&&b.updateVisibleProp(!0)},overlayremove(g){const b=r.layersInControl.find(w=>w.name===g.name);b&&b.updateVisibleProp(!1)}};fe(async()=>{e.useGlobalLeaflet&&(F.L=F.L||await H(()=>import("leaflet"),[]));const{map:g,CRS:b,Icon:w,latLngBounds:L,latLng:O,stamp:A}=e.useGlobalLeaflet?F.L:await H(()=>import("leaflet/dist/leaflet-src.esm"),[]);try{i.beforeMapMount&&await i.beforeMapMount()}catch(v){console.error(`The following error occurred running the provided beforeMapMount hook ${v.message}`)}await wn(w);const ne=typeof i.crs=="string"?b[i.crs]:i.crs;i.crs=ne||b.EPSG3857;const C={addLayer(v){v.layerType!==void 0&&(r.layerControl===void 0?r.layersToAdd.push(v):r.layersInControl.find(x=>A(x.leafletObject)===A(v.leafletObject))||(r.layerControl.addLayer(v),r.layersInControl.push(v))),v.visible!==!1&&r.leafletRef.addLayer(v.leafletObject)},removeLayer(v){v.layerType!==void 0&&(r.layerControl===void 0?r.layersToAdd=r.layersToAdd.filter(x=>x.name!==v.name):(r.layerControl.removeLayer(v.leafletObject),r.layersInControl=r.layersInControl.filter(x=>A(x.leafletObject)!==A(v.leafletObject)))),r.leafletRef.removeLayer(v.leafletObject)},registerLayerControl(v){r.layerControl=v,r.layersToAdd.forEach(x=>{r.layerControl.addLayer(x)}),r.layersToAdd=[],f(v)},registerControl(v){r.leafletRef.addControl(v.leafletObject)},setZoom(v){const x=r.leafletRef.getZoom();v!==x&&r.leafletRef.setZoom(v,p.value)},setCrs(v){const x=r.leafletRef.getBounds();r.leafletRef.options.crs=v,r.leafletRef.fitBounds(x,{animate:!1,padding:[0,0]})},fitBounds(v){r.leafletRef.fitBounds(v,h.value)},setBounds(v){if(!v)return;const x=L(v);x.isValid()&&!(r.lastSetBounds||r.leafletRef.getBounds()).equals(x,0)&&(r.lastSetBounds=x,r.leafletRef.fitBounds(x))},setCenter(v){if(v==null)return;const x=O(v),_=r.lastSetCenter||r.leafletRef.getCenter();(_.lat!==x.lat||_.lng!==x.lng)&&(r.lastSetCenter=x,r.leafletRef.panTo(x,p.value))}};we(s,C.addLayer),we(l,C.removeLayer),we(f,C.registerControl),we(c,C.registerLayerControl),r.leafletRef=Me(g(n.value,i)),pe(C,r.leafletRef,e),ht(r.leafletRef,d),ht(r.leafletRef,a),r.ready=!0,W(()=>t.emit("ready",r.leafletRef))}),At(()=>{_n(d),r.leafletRef&&(r.leafletRef.off(),r.leafletRef.remove())});const y=Be(()=>r.leafletRef),m=Be(()=>r.ready);return{root:n,ready:m,leafletObject:y,attrs:u}},render({attrs:e}){return e.style||(e.style={}),e.style.width||(e.style.width="100%"),e.style.height||(e.style.height="100%"),Q("div",{...e,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),so=["Symbol(Comment)","Symbol(Text)"],lo=["LTooltip","LPopup"],Hn={...ee,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},co=(e,t,n)=>{const{options:r,methods:o}=ge(e,t,n),i=S(e,Hn,r),a={...o,setDraggable(u){t.value.dragging&&(u?t.value.dragging.enable():t.value.dragging.disable())},latLngSync(u){n.emit("update:latLng",u.latlng),n.emit("update:lat-lng",u.latlng)},setLatLng(u){if(u!=null&&t.value){const s=t.value.getLatLng();(!s||!s.equals(u))&&t.value.setLatLng(u)}}};return{options:i,methods:a}},fo=(e,t)=>{const n=t.slots.default&&t.slots.default();return n&&n.length&&n.some(po)};function po(e){return!(so.includes(e.type.toString())||lo.includes(e.type.name))}const ho=Object.freeze(Object.defineProperty({__proto__:null,markerProps:Hn,setupMarker:co,shouldBlankIcon:fo},Symbol.toStringTag,{value:"Module"})),Et={...rt,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},Gn=(e,t,n)=>{const{options:r,methods:o}=Nt(e,t,n),i=S(e,Et,r),a={...o,setSmoothFactor(u){t.value.setStyle({smoothFactor:u})},setNoClip(u){t.value.setStyle({noClip:u})},addLatLng(u){t.value.addLatLng(u)}};return{options:i,methods:a}},yo=Object.freeze(Object.defineProperty({__proto__:null,polylineProps:Et,setupPolyline:Gn},Symbol.toStringTag,{value:"Module"})),Fe={...Et},qn=(e,t,n)=>{const{options:r,methods:o}=Gn(e,t,n),i=S(e,Fe,r),a={...o,toGeoJSON(u){return t.value.toGeoJSON(u)}};return{options:i,methods:a}},mo=Object.freeze(Object.defineProperty({__proto__:null,polygonProps:Fe,setupPolygon:qn},Symbol.toStringTag,{value:"Module"})),Rt={...ye,content:{type:String,default:null}},Bt=(e,t)=>{const{options:n,methods:r}=me(e),o={...r,setContent(i){t.value&&i!==null&&i!==void 0&&t.value.setContent(i)}};return{options:n,methods:o}},go=e=>e.default?Q("div",{ref:"root"},e.default()):null,vo=Object.freeze(Object.defineProperty({__proto__:null,popperProps:Rt,render:go,setupPopper:Bt},Symbol.toStringTag,{value:"Module"})),_o={...Rt,latLng:{type:[Object,Array],default:()=>[]}},bo=(e,t)=>{const{options:n,methods:r}=Bt(e,t);return{options:n,methods:r}},wo=Object.freeze(Object.defineProperty({__proto__:null,popupProps:_o,setupPopup:bo},Symbol.toStringTag,{value:"Module"})),Un={...Fe,latLngs:{...Fe.latLngs,required:!1},bounds:{type:Object,custom:!0}},xo=(e,t,n)=>{const{options:r,methods:o}=qn(e,t,n),i=S(e,Un,r),a={...o,setBounds(u){t.value.setBounds(u)},setLatLngs(u){t.value.setBounds(u)}};return{options:i,methods:a}},So=Object.freeze(Object.defineProperty({__proto__:null,rectangleProps:Un,setupRectangle:xo},Symbol.toStringTag,{value:"Module"})),at={...it,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:e=>typeof e=="string"?!0:Array.isArray(e)?e.every(t=>typeof t=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},It=(e,t,n)=>{const{options:r,methods:o}=kt(e,t,n),i=S(e,at,r),a={...o};return{options:i,methods:a}},Oo=Object.freeze(Object.defineProperty({__proto__:null,setupTileLayer:It,tileLayerProps:at},Symbol.toStringTag,{value:"Module"})),Hs=ce({props:at,setup(e,t){const n=E(),r=je(he),o=R(de),{options:i,methods:a}=It(e,n,t);return fe(async()=>{const{tileLayer:u}=r?F.L:await H(()=>import("leaflet/dist/leaflet-src.esm"),[]);n.value=Me(u(e.url,i));const{listeners:s}=Pe(t.attrs);n.value.on(s),pe(a,n.value,e),o({...e,...a,leafletObject:n.value}),W(()=>t.emit("ready",n.value))}),{leafletObject:n}},render(){return null}}),Lo={...Rt},Ao=(e,t)=>{const{options:n,methods:r}=Bt(e,t),o=R(jt);return At(()=>{o()}),{options:n,methods:r}},$o=Object.freeze(Object.defineProperty({__proto__:null,setupTooltip:Ao,tooltipProps:Lo},Symbol.toStringTag,{value:"Module"})),Fn={...at,layers:{type:String,required:!0},styles:{type:String},format:{type:String},transparent:{type:Boolean,default:void 0},version:{type:String},crs:{type:Object},uppercase:{type:Boolean,default:void 0}},Mo=(e,t,n)=>{const{options:r,methods:o}=It(e,t,n);return{options:S(e,Fn,r),methods:{...o}}},jo=Object.freeze(Object.defineProperty({__proto__:null,setupWMSTileLayer:Mo,wmsTileLayerProps:Fn},Symbol.toStringTag,{value:"Module"})),Xn=Object.freeze(Object.defineProperty({__proto__:null,Circle:Hr,CircleMarker:Dr,Component:Er,Control:Gr,ControlAttribution:Ur,ControlLayers:Xr,ControlScale:Zr,ControlZoom:Jr,FeatureGroup:eo,GeoJSON:no,GridLayer:ro,Icon:oo,ImageOverlay:ao,InteractiveLayer:Ir,Layer:Br,LayerGroup:Kr,Marker:ho,Path:zr,Polygon:mo,Polyline:yo,Popper:vo,Popup:wo,Rectangle:So,TileLayer:Oo,Tooltip:$o,WmsTileLayer:jo},Symbol.toStringTag,{value:"Module"}));function He(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Po(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Yn(e){let t,n,r;e.length!==2?(t=He,n=(u,s)=>He(e(u),s),r=(u,s)=>e(u)-s):(t=e===He||e===Po?e:No,n=e,r=e);function o(u,s,l=0,f=u.length){if(l<f){if(t(s,s)!==0)return f;do{const c=l+f>>>1;n(u[c],s)<0?l=c+1:f=c}while(l<f)}return l}function i(u,s,l=0,f=u.length){if(l<f){if(t(s,s)!==0)return f;do{const c=l+f>>>1;n(u[c],s)<=0?l=c+1:f=c}while(l<f)}return l}function a(u,s,l=0,f=u.length){const c=o(u,s,l,f-1);return c>l&&r(u[c-1],s)>-r(u[c],s)?c-1:c}return{left:o,center:a,right:i}}function No(){return 0}function Co(e){return e===null?NaN:+e}const To=Yn(He),ko=To.right;Yn(Co).center;function Eo(e,t){let n,r;if(t===void 0)for(const o of e)o!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)));else{let o=-1;for(let i of e)(i=t(i,++o,e))!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)))}return[n,r]}const Ro=Math.sqrt(50),Bo=Math.sqrt(10),Io=Math.sqrt(2);function Xe(e,t,n){const r=(t-e)/Math.max(0,n),o=Math.floor(Math.log10(r)),i=r/Math.pow(10,o),a=i>=Ro?10:i>=Bo?5:i>=Io?2:1;let u,s,l;return o<0?(l=Math.pow(10,-o)/a,u=Math.round(e*l),s=Math.round(t*l),u/l<e&&++u,s/l>t&&--s,l=-l):(l=Math.pow(10,o)*a,u=Math.round(e/l),s=Math.round(t/l),u*l<e&&++u,s*l>t&&--s),s<u&&.5<=n&&n<2?Xe(e,t,n*2):[u,s,l]}function zo(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[o,i,a]=r?Xe(t,e,n):Xe(e,t,n);if(!(i>=o))return[];const u=i-o+1,s=new Array(u);if(r)if(a<0)for(let l=0;l<u;++l)s[l]=(i-l)/-a;else for(let l=0;l<u;++l)s[l]=(i-l)*a;else if(a<0)for(let l=0;l<u;++l)s[l]=(o+l)/-a;else for(let l=0;l<u;++l)s[l]=(o+l)*a;return s}function yt(e,t,n){return t=+t,e=+e,n=+n,Xe(e,t,n)[2]}function Do(e,t,n){t=+t,e=+e,n=+n;const r=t<e,o=r?yt(t,e,n):yt(e,t,n);return(r?-1:1)*(o<0?1/-o:o)}var Vo={value:()=>{}};function zt(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ge(n)}function Ge(e){this._=e}function Ho(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ge.prototype=zt.prototype={constructor:Ge,on:function(e,t){var n=this._,r=Ho(e+"",n),o,i=-1,a=r.length;if(arguments.length<2){for(;++i<a;)if((o=(e=r[i]).type)&&(o=Go(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(o=(e=r[i]).type)n[o]=Jt(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Jt(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ge(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function Go(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Jt(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Vo,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var mt="http://www.w3.org/1999/xhtml";const Kt={svg:"http://www.w3.org/2000/svg",xhtml:mt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ut(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Kt.hasOwnProperty(t)?{space:Kt[t],local:e}:e}function qo(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===mt&&t.documentElement.namespaceURI===mt?t.createElement(e):t.createElementNS(n,e)}}function Uo(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Zn(e){var t=ut(e);return(t.local?Uo:qo)(t)}function Fo(){}function Dt(e){return e==null?Fo:function(){return this.querySelector(e)}}function Xo(e){typeof e!="function"&&(e=Dt(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,u=r[o]=new Array(a),s,l,f=0;f<a;++f)(s=i[f])&&(l=e.call(s,s.__data__,f,i))&&("__data__"in s&&(l.__data__=s.__data__),u[f]=l);return new P(r,this._parents)}function Yo(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Zo(){return[]}function Wn(e){return e==null?Zo:function(){return this.querySelectorAll(e)}}function Wo(e){return function(){return Yo(e.apply(this,arguments))}}function Jo(e){typeof e=="function"?e=Wo(e):e=Wn(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a=t[i],u=a.length,s,l=0;l<u;++l)(s=a[l])&&(r.push(e.call(s,s.__data__,l,a)),o.push(s));return new P(r,o)}function Jn(e){return function(){return this.matches(e)}}function Kn(e){return function(t){return t.matches(e)}}var Ko=Array.prototype.find;function Qo(e){return function(){return Ko.call(this.children,e)}}function ei(){return this.firstElementChild}function ti(e){return this.select(e==null?ei:Qo(typeof e=="function"?e:Kn(e)))}var ni=Array.prototype.filter;function ri(){return Array.from(this.children)}function oi(e){return function(){return ni.call(this.children,e)}}function ii(e){return this.selectAll(e==null?ri:oi(typeof e=="function"?e:Kn(e)))}function ai(e){typeof e!="function"&&(e=Jn(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,u=r[o]=[],s,l=0;l<a;++l)(s=i[l])&&e.call(s,s.__data__,l,i)&&u.push(s);return new P(r,this._parents)}function Qn(e){return new Array(e.length)}function ui(){return new P(this._enter||this._groups.map(Qn),this._parents)}function Ye(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ye.prototype={constructor:Ye,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function si(e){return function(){return e}}function li(e,t,n,r,o,i){for(var a=0,u,s=t.length,l=i.length;a<l;++a)(u=t[a])?(u.__data__=i[a],r[a]=u):n[a]=new Ye(e,i[a]);for(;a<s;++a)(u=t[a])&&(o[a]=u)}function ci(e,t,n,r,o,i,a){var u,s,l=new Map,f=t.length,c=i.length,p=new Array(f),h;for(u=0;u<f;++u)(s=t[u])&&(p[u]=h=a.call(s,s.__data__,u,t)+"",l.has(h)?o[u]=s:l.set(h,s));for(u=0;u<c;++u)h=a.call(e,i[u],u,i)+"",(s=l.get(h))?(r[u]=s,s.__data__=i[u],l.delete(h)):n[u]=new Ye(e,i[u]);for(u=0;u<f;++u)(s=t[u])&&l.get(p[u])===s&&(o[u]=s)}function fi(e){return e.__data__}function pi(e,t){if(!arguments.length)return Array.from(this,fi);var n=t?ci:li,r=this._parents,o=this._groups;typeof e!="function"&&(e=si(e));for(var i=o.length,a=new Array(i),u=new Array(i),s=new Array(i),l=0;l<i;++l){var f=r[l],c=o[l],p=c.length,h=hi(e.call(f,f&&f.__data__,l,r)),d=h.length,y=u[l]=new Array(d),m=a[l]=new Array(d),g=s[l]=new Array(p);n(f,c,y,m,g,h,t);for(var b=0,w=0,L,O;b<d;++b)if(L=y[b]){for(b>=w&&(w=b+1);!(O=m[w])&&++w<d;);L._next=O||null}}return a=new P(a,r),a._enter=u,a._exit=s,a}function hi(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function di(){return new P(this._exit||this._groups.map(Qn),this._parents)}function yi(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function mi(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,a=Math.min(o,i),u=new Array(o),s=0;s<a;++s)for(var l=n[s],f=r[s],c=l.length,p=u[s]=new Array(c),h,d=0;d<c;++d)(h=l[d]||f[d])&&(p[d]=h);for(;s<o;++s)u[s]=n[s];return new P(u,this._parents)}function gi(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],a;--o>=0;)(a=r[o])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function vi(e){e||(e=_i);function t(c,p){return c&&p?e(c.__data__,p.__data__):!c-!p}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a=n[i],u=a.length,s=o[i]=new Array(u),l,f=0;f<u;++f)(l=a[f])&&(s[f]=l);s.sort(t)}return new P(o,this._parents).order()}function _i(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function bi(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function wi(){return Array.from(this)}function xi(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null}function Si(){let e=0;for(const t of this)++e;return e}function Oi(){return!this.node()}function Li(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,a=o.length,u;i<a;++i)(u=o[i])&&e.call(u,u.__data__,i,o);return this}function Ai(e){return function(){this.removeAttribute(e)}}function $i(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Mi(e,t){return function(){this.setAttribute(e,t)}}function ji(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Pi(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ni(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ci(e,t){var n=ut(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?$i:Ai:typeof t=="function"?n.local?Ni:Pi:n.local?ji:Mi)(n,t))}function er(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ti(e){return function(){this.style.removeProperty(e)}}function ki(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ei(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Ri(e,t,n){return arguments.length>1?this.each((t==null?Ti:typeof t=="function"?Ei:ki)(e,t,n??"")):ue(this.node(),e)}function ue(e,t){return e.style.getPropertyValue(t)||er(e).getComputedStyle(e,null).getPropertyValue(t)}function Bi(e){return function(){delete this[e]}}function Ii(e,t){return function(){this[e]=t}}function zi(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Di(e,t){return arguments.length>1?this.each((t==null?Bi:typeof t=="function"?zi:Ii)(e,t)):this.node()[e]}function tr(e){return e.trim().split(/^|\s+/)}function Vt(e){return e.classList||new nr(e)}function nr(e){this._node=e,this._names=tr(e.getAttribute("class")||"")}nr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function rr(e,t){for(var n=Vt(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function or(e,t){for(var n=Vt(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Vi(e){return function(){rr(this,e)}}function Hi(e){return function(){or(this,e)}}function Gi(e,t){return function(){(t.apply(this,arguments)?rr:or)(this,e)}}function qi(e,t){var n=tr(e+"");if(arguments.length<2){for(var r=Vt(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Gi:t?Vi:Hi)(n,t))}function Ui(){this.textContent=""}function Fi(e){return function(){this.textContent=e}}function Xi(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Yi(e){return arguments.length?this.each(e==null?Ui:(typeof e=="function"?Xi:Fi)(e)):this.node().textContent}function Zi(){this.innerHTML=""}function Wi(e){return function(){this.innerHTML=e}}function Ji(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ki(e){return arguments.length?this.each(e==null?Zi:(typeof e=="function"?Ji:Wi)(e)):this.node().innerHTML}function Qi(){this.nextSibling&&this.parentNode.appendChild(this)}function ea(){return this.each(Qi)}function ta(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function na(){return this.each(ta)}function ra(e){var t=typeof e=="function"?e:Zn(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function oa(){return null}function ia(e,t){var n=typeof e=="function"?e:Zn(e),r=t==null?oa:typeof t=="function"?t:Dt(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function aa(){var e=this.parentNode;e&&e.removeChild(this)}function ua(){return this.each(aa)}function sa(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function la(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ca(e){return this.select(e?la:sa)}function fa(e){return arguments.length?this.property("__data__",e):this.node().__data__}function pa(e){return function(t){e.call(this,t,this.__data__)}}function ha(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function da(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function ya(e,t,n){return function(){var r=this.__on,o,i=pa(t);if(r){for(var a=0,u=r.length;a<u;++a)if((o=r[a]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function ma(e,t,n){var r=ha(e+""),o,i=r.length,a;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,l=u.length,f;s<l;++s)for(o=0,f=u[s];o<i;++o)if((a=r[o]).type===f.type&&a.name===f.name)return f.value}return}for(u=t?ya:da,o=0;o<i;++o)this.each(u(r[o],t,n));return this}function ir(e,t,n){var r=er(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function ga(e,t){return function(){return ir(this,e,t)}}function va(e,t){return function(){return ir(this,e,t.apply(this,arguments))}}function _a(e,t){return this.each((typeof t=="function"?va:ga)(e,t))}function*ba(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,a;o<i;++o)(a=r[o])&&(yield a)}var ar=[null];function P(e,t){this._groups=e,this._parents=t}function Ce(){return new P([[document.documentElement]],ar)}function wa(){return this}P.prototype=Ce.prototype={constructor:P,select:Xo,selectAll:Jo,selectChild:ti,selectChildren:ii,filter:ai,data:pi,enter:ui,exit:di,join:yi,merge:mi,selection:wa,order:gi,sort:vi,call:bi,nodes:wi,node:xi,size:Si,empty:Oi,each:Li,attr:Ci,style:Ri,property:Di,classed:qi,text:Yi,html:Ki,raise:ea,lower:na,append:ra,insert:ia,remove:ua,clone:ca,datum:fa,on:ma,dispatch:_a,[Symbol.iterator]:ba};function X(e){return typeof e=="string"?new P([[document.querySelector(e)]],[document.documentElement]):new P([[e]],ar)}function xa(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Sa(e,t){if(e=xa(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}function Ht(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ur(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Te(){}var Le=.7,Ze=1/Le,ae="\\s*([+-]?\\d+)\\s*",Ae="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",I="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Oa=/^#([0-9a-f]{3,8})$/,La=new RegExp(`^rgb\\(${ae},${ae},${ae}\\)$`),Aa=new RegExp(`^rgb\\(${I},${I},${I}\\)$`),$a=new RegExp(`^rgba\\(${ae},${ae},${ae},${Ae}\\)$`),Ma=new RegExp(`^rgba\\(${I},${I},${I},${Ae}\\)$`),ja=new RegExp(`^hsl\\(${Ae},${I},${I}\\)$`),Pa=new RegExp(`^hsla\\(${Ae},${I},${I},${Ae}\\)$`),Qt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ht(Te,J,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:en,formatHex:en,formatHex8:Na,formatHsl:Ca,formatRgb:tn,toString:tn});function en(){return this.rgb().formatHex()}function Na(){return this.rgb().formatHex8()}function Ca(){return sr(this).formatHsl()}function tn(){return this.rgb().formatRgb()}function J(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Oa.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?nn(t):n===3?new $(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ie(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ie(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=La.exec(e))?new $(t[1],t[2],t[3],1):(t=Aa.exec(e))?new $(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$a.exec(e))?Ie(t[1],t[2],t[3],t[4]):(t=Ma.exec(e))?Ie(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ja.exec(e))?an(t[1],t[2]/100,t[3]/100,1):(t=Pa.exec(e))?an(t[1],t[2]/100,t[3]/100,t[4]):Qt.hasOwnProperty(e)?nn(Qt[e]):e==="transparent"?new $(NaN,NaN,NaN,0):null}function nn(e){return new $(e>>16&255,e>>8&255,e&255,1)}function Ie(e,t,n,r){return r<=0&&(e=t=n=NaN),new $(e,t,n,r)}function Ta(e){return e instanceof Te||(e=J(e)),e?(e=e.rgb(),new $(e.r,e.g,e.b,e.opacity)):new $}function gt(e,t,n,r){return arguments.length===1?Ta(e):new $(e,t,n,r??1)}function $(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ht($,gt,ur(Te,{brighter(e){return e=e==null?Ze:Math.pow(Ze,e),new $(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Le:Math.pow(Le,e),new $(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $(Z(this.r),Z(this.g),Z(this.b),We(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rn,formatHex:rn,formatHex8:ka,formatRgb:on,toString:on}));function rn(){return`#${Y(this.r)}${Y(this.g)}${Y(this.b)}`}function ka(){return`#${Y(this.r)}${Y(this.g)}${Y(this.b)}${Y((isNaN(this.opacity)?1:this.opacity)*255)}`}function on(){const e=We(this.opacity);return`${e===1?"rgb(":"rgba("}${Z(this.r)}, ${Z(this.g)}, ${Z(this.b)}${e===1?")":`, ${e})`}`}function We(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Z(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Y(e){return e=Z(e),(e<16?"0":"")+e.toString(16)}function an(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new k(e,t,n,r)}function sr(e){if(e instanceof k)return new k(e.h,e.s,e.l,e.opacity);if(e instanceof Te||(e=J(e)),!e)return new k;if(e instanceof k)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,u=i-o,s=(i+o)/2;return u?(t===i?a=(n-r)/u+(n<r)*6:n===i?a=(r-t)/u+2:a=(t-n)/u+4,u/=s<.5?i+o:2-i-o,a*=60):u=s>0&&s<1?0:a,new k(a,u,s,e.opacity)}function Ea(e,t,n,r){return arguments.length===1?sr(e):new k(e,t,n,r??1)}function k(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ht(k,Ea,ur(Te,{brighter(e){return e=e==null?Ze:Math.pow(Ze,e),new k(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Le:Math.pow(Le,e),new k(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new $(ct(e>=240?e-240:e+120,o,r),ct(e,o,r),ct(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new k(un(this.h),ze(this.s),ze(this.l),We(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=We(this.opacity);return`${e===1?"hsl(":"hsla("}${un(this.h)}, ${ze(this.s)*100}%, ${ze(this.l)*100}%${e===1?")":`, ${e})`}`}}));function un(e){return e=(e||0)%360,e<0?e+360:e}function ze(e){return Math.max(0,Math.min(1,e||0))}function ct(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Gt=e=>()=>e;function Ra(e,t){return function(n){return e+n*t}}function Ba(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ia(e){return(e=+e)==1?lr:function(t,n){return n-t?Ba(t,n,e):Gt(isNaN(t)?n:t)}}function lr(e,t){var n=t-e;return n?Ra(e,n):Gt(isNaN(e)?t:e)}const Je=function e(t){var n=Ia(t);function r(o,i){var a=n((o=gt(o)).r,(i=gt(i)).r),u=n(o.g,i.g),s=n(o.b,i.b),l=lr(o.opacity,i.opacity);return function(f){return o.r=a(f),o.g=u(f),o.b=s(f),o.opacity=l(f),o+""}}return r.gamma=e,r}(1);function za(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),o;return function(i){for(o=0;o<n;++o)r[o]=e[o]*(1-i)+t[o]*i;return r}}function Da(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Va(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,o=new Array(r),i=new Array(n),a;for(a=0;a<r;++a)o[a]=qt(e[a],t[a]);for(;a<n;++a)i[a]=t[a];return function(u){for(a=0;a<r;++a)i[a]=o[a](u);return i}}function Ha(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function T(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ga(e,t){var n={},r={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=qt(e[o],t[o]):r[o]=t[o];return function(i){for(o in n)r[o]=n[o](i);return r}}var vt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ft=new RegExp(vt.source,"g");function qa(e){return function(){return e}}function Ua(e){return function(t){return e(t)+""}}function cr(e,t){var n=vt.lastIndex=ft.lastIndex=0,r,o,i,a=-1,u=[],s=[];for(e=e+"",t=t+"";(r=vt.exec(e))&&(o=ft.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),u[a]?u[a]+=i:u[++a]=i),(r=r[0])===(o=o[0])?u[a]?u[a]+=o:u[++a]=o:(u[++a]=null,s.push({i:a,x:T(r,o)})),n=ft.lastIndex;return n<t.length&&(i=t.slice(n),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?Ua(s[0].x):qa(t):(t=s.length,function(l){for(var f=0,c;f<t;++f)u[(c=s[f]).i]=c.x(l);return u.join("")})}function qt(e,t){var n=typeof t,r;return t==null||n==="boolean"?Gt(t):(n==="number"?T:n==="string"?(r=J(t))?(t=r,Je):cr:t instanceof J?Je:t instanceof Date?Ha:Da(t)?za:Array.isArray(t)?Va:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ga:T)(e,t)}function Fa(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var sn=180/Math.PI,fr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pr(e,t,n,r,o,i){var a,u,s;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*sn,skewX:Math.atan(s)*sn,scaleX:a,scaleY:u}}var De;function Xa(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?fr:pr(t.a,t.b,t.c,t.d,t.e,t.f)}function Ya(e){return e==null||(De||(De=document.createElementNS("http://www.w3.org/2000/svg","g")),De.setAttribute("transform",e),!(e=De.transform.baseVal.consolidate()))?fr:(e=e.matrix,pr(e.a,e.b,e.c,e.d,e.e,e.f))}function hr(e,t,n,r){function o(l){return l.length?l.pop()+" ":""}function i(l,f,c,p,h,d){if(l!==c||f!==p){var y=h.push("translate(",null,t,null,n);d.push({i:y-4,x:T(l,c)},{i:y-2,x:T(f,p)})}else(c||p)&&h.push("translate("+c+t+p+n)}function a(l,f,c,p){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),p.push({i:c.push(o(c)+"rotate(",null,r)-2,x:T(l,f)})):f&&c.push(o(c)+"rotate("+f+r)}function u(l,f,c,p){l!==f?p.push({i:c.push(o(c)+"skewX(",null,r)-2,x:T(l,f)}):f&&c.push(o(c)+"skewX("+f+r)}function s(l,f,c,p,h,d){if(l!==c||f!==p){var y=h.push(o(h)+"scale(",null,",",null,")");d.push({i:y-4,x:T(l,c)},{i:y-2,x:T(f,p)})}else(c!==1||p!==1)&&h.push(o(h)+"scale("+c+","+p+")")}return function(l,f){var c=[],p=[];return l=e(l),f=e(f),i(l.translateX,l.translateY,f.translateX,f.translateY,c,p),a(l.rotate,f.rotate,c,p),u(l.skewX,f.skewX,c,p),s(l.scaleX,l.scaleY,f.scaleX,f.scaleY,c,p),l=f=null,function(h){for(var d=-1,y=p.length,m;++d<y;)c[(m=p[d]).i]=m.x(h);return c.join("")}}}var Za=hr(Xa,"px, ","px)","deg)"),Wa=hr(Ya,", ",")",")"),se=0,xe=0,_e=0,dr=1e3,Ke,Se,Qe=0,K=0,st=0,$e=typeof performance=="object"&&performance.now?performance:Date,yr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ut(){return K||(yr(Ja),K=$e.now()+st)}function Ja(){K=0}function et(){this._call=this._time=this._next=null}et.prototype=mr.prototype={constructor:et,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ut():+n)+(t==null?0:+t),!this._next&&Se!==this&&(Se?Se._next=this:Ke=this,Se=this),this._call=e,this._time=n,_t()},stop:function(){this._call&&(this._call=null,this._time=1/0,_t())}};function mr(e,t,n){var r=new et;return r.restart(e,t,n),r}function Ka(){Ut(),++se;for(var e=Ke,t;e;)(t=K-e._time)>=0&&e._call.call(void 0,t),e=e._next;--se}function ln(){K=(Qe=$e.now())+st,se=xe=0;try{Ka()}finally{se=0,eu(),K=0}}function Qa(){var e=$e.now(),t=e-Qe;t>dr&&(st-=t,Qe=e)}function eu(){for(var e,t=Ke,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ke=n);Se=e,_t(r)}function _t(e){if(!se){xe&&(xe=clearTimeout(xe));var t=e-K;t>24?(e<1/0&&(xe=setTimeout(ln,e-$e.now()-st)),_e&&(_e=clearInterval(_e))):(_e||(Qe=$e.now(),_e=setInterval(Qa,dr)),se=1,yr(ln))}}function cn(e,t,n){var r=new et;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var tu=zt("start","end","cancel","interrupt"),nu=[],gr=0,fn=1,bt=2,qe=3,pn=4,wt=5,Ue=6;function lt(e,t,n,r,o,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;ru(e,n,{name:t,index:r,group:o,on:tu,tween:nu,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:gr})}function Ft(e,t){var n=B(e,t);if(n.state>gr)throw new Error("too late; already scheduled");return n}function z(e,t){var n=B(e,t);if(n.state>qe)throw new Error("too late; already running");return n}function B(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ru(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=mr(i,0,n.time);function i(l){n.state=fn,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var f,c,p,h;if(n.state!==fn)return s();for(f in r)if(h=r[f],h.name===n.name){if(h.state===qe)return cn(a);h.state===pn?(h.state=Ue,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[f]):+f<t&&(h.state=Ue,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[f])}if(cn(function(){n.state===qe&&(n.state=pn,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=bt,n.on.call("start",e,e.__data__,n.index,n.group),n.state===bt){for(n.state=qe,o=new Array(p=n.tween.length),f=0,c=-1;f<p;++f)(h=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(o[++c]=h);o.length=c+1}}function u(l){for(var f=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(s),n.state=wt,1),c=-1,p=o.length;++c<p;)o[c].call(e,f);n.state===wt&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Ue,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function ou(e,t){var n=e.__transition,r,o,i=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){i=!1;continue}o=r.state>bt&&r.state<wt,r.state=Ue,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}i&&delete e.__transition}}function iu(e){return this.each(function(){ou(this,e)})}function au(e,t){var n,r;return function(){var o=z(this,e),i=o.tween;if(i!==n){r=n=i;for(var a=0,u=r.length;a<u;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}o.tween=r}}function uu(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=z(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var u={name:t,value:n},s=0,l=o.length;s<l;++s)if(o[s].name===t){o[s]=u;break}s===l&&o.push(u)}i.tween=o}}function su(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=B(this.node(),n).tween,o=0,i=r.length,a;o<i;++o)if((a=r[o]).name===e)return a.value;return null}return this.each((t==null?au:uu)(n,e,t))}function Xt(e,t,n){var r=e._id;return e.each(function(){var o=z(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return B(o,r).value[t]}}function vr(e,t){var n;return(typeof t=="number"?T:t instanceof J?Je:(n=J(t))?(t=n,Je):cr)(e,t)}function lu(e){return function(){this.removeAttribute(e)}}function cu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fu(e,t,n){var r,o=n+"",i;return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function pu(e,t,n){var r,o=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function hu(e,t,n){var r,o,i;return function(){var a,u=n(this),s;return u==null?void this.removeAttribute(e):(a=this.getAttribute(e),s=u+"",a===s?null:a===r&&s===o?i:(o=s,i=t(r=a,u)))}}function du(e,t,n){var r,o,i;return function(){var a,u=n(this),s;return u==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),s=u+"",a===s?null:a===r&&s===o?i:(o=s,i=t(r=a,u)))}}function yu(e,t){var n=ut(e),r=n==="transform"?Wa:vr;return this.attrTween(e,typeof t=="function"?(n.local?du:hu)(n,r,Xt(this,"attr."+e,t)):t==null?(n.local?cu:lu)(n):(n.local?pu:fu)(n,r,t))}function mu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function gu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function vu(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&gu(e,i)),n}return o._value=t,o}function _u(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&mu(e,i)),n}return o._value=t,o}function bu(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ut(e);return this.tween(n,(r.local?vu:_u)(r,t))}function wu(e,t){return function(){Ft(this,e).delay=+t.apply(this,arguments)}}function xu(e,t){return t=+t,function(){Ft(this,e).delay=t}}function Su(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?wu:xu)(t,e)):B(this.node(),t).delay}function Ou(e,t){return function(){z(this,e).duration=+t.apply(this,arguments)}}function Lu(e,t){return t=+t,function(){z(this,e).duration=t}}function Au(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ou:Lu)(t,e)):B(this.node(),t).duration}function $u(e,t){if(typeof t!="function")throw new Error;return function(){z(this,e).ease=t}}function Mu(e){var t=this._id;return arguments.length?this.each($u(t,e)):B(this.node(),t).ease}function ju(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;z(this,e).ease=n}}function Pu(e){if(typeof e!="function")throw new Error;return this.each(ju(this._id,e))}function Nu(e){typeof e!="function"&&(e=Jn(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,u=r[o]=[],s,l=0;l<a;++l)(s=i[l])&&e.call(s,s.__data__,l,i)&&u.push(s);return new G(r,this._parents,this._name,this._id)}function Cu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),u=0;u<i;++u)for(var s=t[u],l=n[u],f=s.length,c=a[u]=new Array(f),p,h=0;h<f;++h)(p=s[h]||l[h])&&(c[h]=p);for(;u<r;++u)a[u]=t[u];return new G(a,this._parents,this._name,this._id)}function Tu(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ku(e,t,n){var r,o,i=Tu(t)?Ft:z;return function(){var a=i(this,e),u=a.on;u!==r&&(o=(r=u).copy()).on(t,n),a.on=o}}function Eu(e,t){var n=this._id;return arguments.length<2?B(this.node(),n).on.on(e):this.each(ku(n,e,t))}function Ru(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Bu(){return this.on("end.remove",Ru(this._id))}function Iu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Dt(e));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var u=r[a],s=u.length,l=i[a]=new Array(s),f,c,p=0;p<s;++p)(f=u[p])&&(c=e.call(f,f.__data__,p,u))&&("__data__"in f&&(c.__data__=f.__data__),l[p]=c,lt(l[p],t,n,p,l,B(f,n)));return new G(i,this._parents,t,n)}function zu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Wn(e));for(var r=this._groups,o=r.length,i=[],a=[],u=0;u<o;++u)for(var s=r[u],l=s.length,f,c=0;c<l;++c)if(f=s[c]){for(var p=e.call(f,f.__data__,c,s),h,d=B(f,n),y=0,m=p.length;y<m;++y)(h=p[y])&&lt(h,t,n,y,p,d);i.push(p),a.push(f)}return new G(i,a,t,n)}var Du=Ce.prototype.constructor;function Vu(){return new Du(this._groups,this._parents)}function Hu(e,t){var n,r,o;return function(){var i=ue(this,e),a=(this.style.removeProperty(e),ue(this,e));return i===a?null:i===n&&a===r?o:o=t(n=i,r=a)}}function _r(e){return function(){this.style.removeProperty(e)}}function Gu(e,t,n){var r,o=n+"",i;return function(){var a=ue(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}function qu(e,t,n){var r,o,i;return function(){var a=ue(this,e),u=n(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(e),ue(this,e))),a===s?null:a===r&&s===o?i:(o=s,i=t(r=a,u))}}function Uu(e,t){var n,r,o,i="style."+t,a="end."+i,u;return function(){var s=z(this,e),l=s.on,f=s.value[i]==null?u||(u=_r(t)):void 0;(l!==n||o!==f)&&(r=(n=l).copy()).on(a,o=f),s.on=r}}function Fu(e,t,n){var r=(e+="")=="transform"?Za:vr;return t==null?this.styleTween(e,Hu(e,r)).on("end.style."+e,_r(e)):typeof t=="function"?this.styleTween(e,qu(e,r,Xt(this,"style."+e,t))).each(Uu(this._id,e)):this.styleTween(e,Gu(e,r,t),n).on("end.style."+e,null)}function Xu(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Yu(e,t,n){var r,o;function i(){var a=t.apply(this,arguments);return a!==o&&(r=(o=a)&&Xu(e,a,n)),r}return i._value=t,i}function Zu(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Yu(e,t,n??""))}function Wu(e){return function(){this.textContent=e}}function Ju(e){return function(){var t=e(this);this.textContent=t??""}}function Ku(e){return this.tween("text",typeof e=="function"?Ju(Xt(this,"text",e)):Wu(e==null?"":e+""))}function Qu(e){return function(t){this.textContent=e.call(this,t)}}function es(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&Qu(o)),t}return r._value=e,r}function ts(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,es(e))}function ns(){for(var e=this._name,t=this._id,n=br(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a=r[i],u=a.length,s,l=0;l<u;++l)if(s=a[l]){var f=B(s,t);lt(s,e,n,l,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new G(r,this._parents,e,n)}function rs(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,a){var u={value:a},s={value:function(){--o===0&&i()}};n.each(function(){var l=z(this,r),f=l.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),l.on=t}),o===0&&i()})}var os=0;function G(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function br(){return++os}var V=Ce.prototype;G.prototype={constructor:G,select:Iu,selectAll:zu,selectChild:V.selectChild,selectChildren:V.selectChildren,filter:Nu,merge:Cu,selection:Vu,transition:ns,call:V.call,nodes:V.nodes,node:V.node,size:V.size,empty:V.empty,each:V.each,on:Eu,attr:yu,attrTween:bu,style:Fu,styleTween:Zu,text:Ku,textTween:ts,remove:Bu,tween:su,delay:Su,duration:Au,ease:Mu,easeVarying:Pu,end:rs,[Symbol.iterator]:V[Symbol.iterator]};function is(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var as={time:null,delay:0,duration:250,ease:is};function us(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ss(e){var t,n;e instanceof G?(t=e._id,e=e._name):(t=br(),(n=as).time=Ut(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a=r[i],u=a.length,s,l=0;l<u;++l)(s=a[l])&&lt(s,e,t,l,a,n||us(s,t));return new G(r,this._parents,e,t)}Ce.prototype.interrupt=iu;Ce.prototype.transition=ss;function ls(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function tt(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function le(e){return e=tt(Math.abs(e)),e?e[1]:NaN}function cs(e,t){return function(n,r){for(var o=n.length,i=[],a=0,u=e[0],s=0;o>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),i.push(n.substring(o-=u,o+u)),!((s+=u+1)>r));)u=e[a=(a+1)%e.length];return i.reverse().join(t)}}function fs(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var ps=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nt(e){if(!(t=ps.exec(e)))throw new Error("invalid format: "+e);var t;return new Yt({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}nt.prototype=Yt.prototype;function Yt(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Yt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function hs(e){e:for(var t=e.length,n=1,r=-1,o;n<t;++n)switch(e[n]){case".":r=o=n;break;case"0":r===0&&(r=n),o=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(o+1):e}var wr;function ds(e,t){var n=tt(e,t);if(!n)return e+"";var r=n[0],o=n[1],i=o-(wr=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,a=r.length;return i===a?r:i>a?r+new Array(i-a+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+tt(e,Math.max(0,t+i-1))[0]}function hn(e,t){var n=tt(e,t);if(!n)return e+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}const dn={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ls,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>hn(e*100,t),r:hn,s:ds,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function yn(e){return e}var mn=Array.prototype.map,gn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ys(e){var t=e.grouping===void 0||e.thousands===void 0?yn:cs(mn.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?yn:fs(mn.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function l(c){c=nt(c);var p=c.fill,h=c.align,d=c.sign,y=c.symbol,m=c.zero,g=c.width,b=c.comma,w=c.precision,L=c.trim,O=c.type;O==="n"?(b=!0,O="g"):dn[O]||(w===void 0&&(w=12),L=!0,O="g"),(m||p==="0"&&h==="=")&&(m=!0,p="0",h="=");var A=y==="$"?n:y==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",ne=y==="$"?r:/[%p]/.test(O)?a:"",C=dn[O],v=/[defgprs%]/.test(O);w=w===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function x(_){var M=A,N=ne,re,Zt,ke;if(O==="c")N=C(_)+N,_="";else{_=+_;var Ee=_<0||1/_<0;if(_=isNaN(_)?s:C(Math.abs(_),w),L&&(_=hs(_)),Ee&&+_==0&&d!=="+"&&(Ee=!1),M=(Ee?d==="("?d:u:d==="-"||d==="("?"":d)+M,N=(O==="s"?gn[8+wr/3]:"")+N+(Ee&&d==="("?")":""),v){for(re=-1,Zt=_.length;++re<Zt;)if(ke=_.charCodeAt(re),48>ke||ke>57){N=(ke===46?o+_.slice(re+1):_.slice(re))+N,_=_.slice(0,re);break}}}b&&!m&&(_=t(_,1/0));var Re=M.length+_.length+N.length,D=Re<g?new Array(g-Re+1).join(p):"";switch(b&&m&&(_=t(D+_,D.length?g-N.length:1/0),D=""),h){case"<":_=M+_+N+D;break;case"=":_=M+D+_+N;break;case"^":_=D.slice(0,Re=D.length>>1)+M+_+N+D.slice(Re);break;default:_=D+M+_+N;break}return i(_)}return x.toString=function(){return c+""},x}function f(c,p){var h=l((c=nt(c),c.type="f",c)),d=Math.max(-8,Math.min(8,Math.floor(le(p)/3)))*3,y=Math.pow(10,-d),m=gn[8+d/3];return function(g){return h(y*g)+m}}return{format:l,formatPrefix:f}}var Ve,xr,Sr;ms({thousands:",",grouping:[3],currency:["$",""]});function ms(e){return Ve=ys(e),xr=Ve.format,Sr=Ve.formatPrefix,Ve}function gs(e){return Math.max(0,-le(Math.abs(e)))}function vs(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(le(t)/3)))*3-le(Math.abs(e)))}function _s(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,le(t)-le(e))+1}function bs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ws(e){return function(){return e}}function xs(e){return+e}var vn=[0,1];function ie(e){return e}function xt(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:ws(isNaN(t)?NaN:.5)}function Ss(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Os(e,t,n){var r=e[0],o=e[1],i=t[0],a=t[1];return o<r?(r=xt(o,r),i=n(a,i)):(r=xt(r,o),i=n(i,a)),function(u){return i(r(u))}}function Ls(e,t,n){var r=Math.min(e.length,t.length)-1,o=new Array(r),i=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)o[a]=xt(e[a],e[a+1]),i[a]=n(t[a],t[a+1]);return function(u){var s=ko(e,u,1,r)-1;return i[s](o[s](u))}}function As(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function $s(){var e=vn,t=vn,n=qt,r,o,i,a=ie,u,s,l;function f(){var p=Math.min(e.length,t.length);return a!==ie&&(a=Ss(e[0],e[p-1])),u=p>2?Ls:Os,s=l=null,c}function c(p){return p==null||isNaN(p=+p)?i:(s||(s=u(e.map(r),t,n)))(r(a(p)))}return c.invert=function(p){return a(o((l||(l=u(t,e.map(r),T)))(p)))},c.domain=function(p){return arguments.length?(e=Array.from(p,xs),f()):e.slice()},c.range=function(p){return arguments.length?(t=Array.from(p),f()):t.slice()},c.rangeRound=function(p){return t=Array.from(p),n=Fa,f()},c.clamp=function(p){return arguments.length?(a=p?!0:ie,f()):a!==ie},c.interpolate=function(p){return arguments.length?(n=p,f()):n},c.unknown=function(p){return arguments.length?(i=p,c):i},function(p,h){return r=p,o=h,f()}}function Ms(){return $s()(ie,ie)}function js(e,t,n,r){var o=Do(e,t,n),i;switch(r=nt(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=vs(o,a))&&(r.precision=i),Sr(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=_s(o,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=gs(o))&&(r.precision=i-(r.type==="%")*2);break}}return xr(r)}function Ps(e){var t=e.domain;return e.ticks=function(n){var r=t();return zo(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var o=t();return js(o[0],o[o.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),o=0,i=r.length-1,a=r[o],u=r[i],s,l,f=10;for(u<a&&(l=a,a=u,u=l,l=o,o=i,i=l);f-- >0;){if(l=yt(a,u,n),l===s)return r[o]=a,r[i]=u,t(r);if(l>0)a=Math.floor(a/l)*l,u=Math.ceil(u/l)*l;else if(l<0)a=Math.ceil(a*l)/l,u=Math.floor(u*l)/l;else break;s=l}return e},e}function St(){var e=Ms();return e.copy=function(){return As(e,St())},bs.apply(e,arguments),Ps(e)}function Oe(e,t,n){this.k=e,this.x=t,this.y=n}Oe.prototype={constructor:Oe,scale:function(e){return e===1?this:new Oe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Oe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Oe.prototype;var oe=Math.PI/3,Ns=[0,oe,2*oe,3*oe,4*oe,5*oe];function Cs(e){return e[0]}function Ts(e){return e[1]}function ks(){var e=0,t=0,n=1,r=1,o=Cs,i=Ts,a,u,s;function l(c){var p={},h=[],d,y=c.length;for(d=0;d<y;++d)if(!(isNaN(g=+o.call(null,m=c[d],d,c))||isNaN(b=+i.call(null,m,d,c)))){var m,g,b,w=Math.round(b=b/s),L=Math.round(g=g/u-(w&1)/2),O=b-w;if(Math.abs(O)*3>1){var A=g-L,ne=L+(g<L?-1:1)/2,C=w+(b<w?-1:1),v=g-ne,x=b-C;A*A+O*O>v*v+x*x&&(L=ne+(w&1?1:-1)/2,w=C)}var _=L+"-"+w,M=p[_];M?M.push(m):(h.push(M=p[_]=[m]),M.x=(L+(w&1)/2)*u,M.y=w*s)}return h}function f(c){var p=0,h=0;return Ns.map(function(d){var y=Math.sin(d)*c,m=-Math.cos(d)*c,g=y-p,b=m-h;return p=y,h=m,[g,b]})}return l.hexagon=function(c){return"m"+f(c==null?a:+c).join("l")+"z"},l.centers=function(){for(var c=[],p=Math.round(t/s),h=Math.round(e/u),d=p*s;d<r+a;d+=s,++p)for(var y=h*u+(p&1)*u/2;y<n+u/2;y+=u)c.push([y,d]);return c},l.mesh=function(){var c=f(a).slice(0,4).join("l");return l.centers().map(function(p){return"M"+p+"m"+c}).join("")},l.x=function(c){return arguments.length?(o=c,l):o},l.y=function(c){return arguments.length?(i=c,l):i},l.radius=function(c){return arguments.length?(a=+c,u=a*2*Math.sin(oe),s=a*1.5,l):a},l.size=function(c){return arguments.length?(e=t=0,n=+c[0],r=+c[1],l):[n-e,r-t]},l.extent=function(c){return arguments.length?(e=+c[0][0],t=+c[0][1],n=+c[1][0],r=+c[1][1],l):[[e,t],[n,r]]},l.radius(1)}var Ot;(e=>{function t(a={tooltipContent(u){return`Count: ${u.length}`}}){const u=X("body").append("div").attr("class","hexbin-tooltip").style("z-index",9999).style("pointer-events","none").style("visibility","hidden").style("position","fixed");return u.append("div").attr("class","tooltip-content"),{mouseover:function(s,l,f,c){const p=Sa(f);u.style("visibility","visible").html(a.tooltipContent(c,l));const h=u.node();if(!h){console.warn("Leaflet hexbin: tooltip node not found");return}const d=h.clientHeight,y=h.clientWidth;u.style("top",f.clientY-p[1]-d-16+"px").style("left",f.clientX-p[0]-y/2+"px")},mouseout:function(s,l,f,c){u.style("visibility","hidden").html()}}}e.tooltip=t;function n(){return{mouseover:function(a,u,s,l){X(a.parentElement).select("path.hexbin-hexagon").attr("d",function(f){return u._hexLayout.hexagon(u.options.radius)})},mouseout:function(a,u,s,l){X(a.parentElement).select("path.hexbin-hexagon").attr("d",function(f){return u._hexLayout.hexagon(u._scale.radius(u._fn.radiusValue.call(u,f)))})}}}e.resizeFill=n;function r(a=1.5){return{mouseover:function(u,s,l,f){X(u.parentElement).select("path.hexbin-hexagon").transition().duration(s.options.duration).attr("d",function(){return s._hexLayout.hexagon(s._scale.radius.range()[1]*a)})},mouseout:function(u,s,l,f){X(u.parentElement).select("path.hexbin-hexagon").transition().duration(s.options.duration).attr("d",c=>s._hexLayout.hexagon(s._scale.radius(s._fn.radiusValue.call(s,c))))}}}e.resizeScale=r;function o(a=[i()]){return{mouseover:function(u,s,l,f){a.forEach(c=>{c.mouseover(u,s,l,f)})},mouseout:function(u,s,l,f){a.forEach(c=>{c.mouseout(u,s,l,f)})}}}e.compound=o;function i(){return{mouseover:function(){},mouseout:function(){}}}e.none=i})(Ot||(Ot={}));const Lt=Ot;class Or extends j.SVG{constructor(t){super(),this.options={radius:12,opacity:.6,duration:200,colorScaleExtent:[1,void 0],radiusScaleExtent:[1,void 0],colorDomain:null,radiusDomain:null,colorRange:["#f7fbff","#08306b"],radiusRange:[4,12],pointerEvents:"all",...j.Renderer.prototype.options,...j.Layer.prototype.options},this._fn={lng:n=>j.latLng(n).lng,lat:n=>j.latLng(n).lat,colorValue:n=>n.length,radiusValue:n=>Number.MAX_VALUE,fill:n=>{const r=this._fn.colorValue(n);return r!=null?this._scale.color(r):"none"}},this._scale={color:St(),radius:St()},this._dispatch=zt("mouseover","mouseout","click"),this._hoverHandler=Lt.none(),this._hexLayout=ks().radius(this.options.radius).x(({point:[n,r]})=>n).y(({point:[n,r]})=>r),this._data=Array(),this.options={...this.options,...t},this._scale.color.range(this.options.colorRange).clamp(!0),this._scale.radius.range(this.options.radiusRange).clamp(!0)}_initContainer(){super._initContainer(),this._d3Container=X(this._container).select("g")}onAdd(t){return super.onAdd(t),this._map=t,t.on("moveend",this.redraw,this),this.redraw(),this}_project(t){const{x:n,y:r}=this._map.latLngToLayerPoint(t);return[n,r]}onRemove(t){return this._destroyContainer(),t.off("moveend",this.redraw,this),this}_destroyContainer(){X(this._container).remove()}redraw(){const t=this;if(!t._map)return;const n=t._data.map(i=>{const a=t._project(i);return{o:i,point:a}}),r=this._d3Container.selectAll("g.hexbin").data([this._map.getZoom()],i=>i),o=r.enter().append("g").attr("class",function(i){return"hexbin zoom-"+i}).merge(r);r.exit().remove(),this._createHexagons(o,n)}_linearlySpace(t,n,r){const o=(n-t)/Math.max(r-1,1);return Array.from({length:r},(i,a)=>t+a*o)}_createHexagons(t,n){const r=this,o=r._map.getSize(),i=r._map.getBounds().pad(r.options.radius*2/Math.max(o.x,o.y)),a=r._hexLayout(n).filter(({x:y,y:m})=>i.contains(r._map.layerPointToLatLng(j.point(y,m)))),u=r._getExtent(a,r._fn.colorValue,r.options.colorScaleExtent),s=r._getExtent(a,r._fn.radiusValue,r.options.radiusScaleExtent),l=this.options.colorDomain??r._linearlySpace(u[0],u[1],r._scale.color.range().length),f=this.options.radiusDomain||s;r._scale.color.domain(l),r._scale.radius.domain(f);const c=t.selectAll("g.hexbin-container").data(a,({x:y,y:m})=>`${y}:${m}`);c.select("path.hexbin-hexagon").transition().duration(r.options.duration).attr("fill",r._fn.fill.bind(r)).attr("fill-opacity",r.options.opacity).attr("stroke-opacity",r.options.opacity).attr("d",y=>r._hexLayout.hexagon(r._scale.radius(r._fn.radiusValue.call(r,y))));const p=c.enter().append("g").attr("class","hexbin-container").style("pointer-events",r.options.pointerEvents),h=p.append("path").attr("class","hexbin-hexagon").attr("transform",({x:y,y:m})=>`translate(${y},${m})`).attr("d",()=>r._hexLayout.hexagon(r._scale.radius.range()[0])).attr("fill",r._fn.fill.bind(r)).attr("fill-opacity",.01).attr("stroke-opacity",.01).style("pointer-events","all");h.transition().duration(r.options.duration).attr("fill-opacity",r.options.opacity).attr("stroke-opacity",r.options.opacity).attr("d",y=>r._hexLayout.hexagon(r._scale.radius(r._fn.radiusValue.call(r,y)))).style("pointer-events","all"),p.append("path").attr("class","hexbin-grid").attr("transform",({x:y,y:m})=>`translate(${y},${m})`).attr("d",()=>r._hexLayout.hexagon(r.options.radius)).attr("fill","none").attr("stroke","none"),h.on("mouseover",function(y,m){this.parentElement.parentElement.appendChild(this.parentElement),r._hoverHandler.mouseover(this,r,y,m),r._dispatch.call("mouseover",this,y,m)}).on("mouseout",function(y,m){r._hoverHandler.mouseout(this,r,y,m),r._dispatch.call("mouseout",this,r,y,m)}).on("click",function(y,m){r._dispatch.call("click",this,r,y,m)});const d=c.exit();d.select("path.hexbin-hexagon").transition().duration(r.options.duration).attr("fill-opacity",0).attr("stroke-opacity",0).attr("d",y=>r._hexLayout.hexagon(0)),d.transition().duration(r.options.duration).remove()}_getExtent(t,n,r){let o=Eo(t,n.bind(this));return(o[0]===void 0||o[1]===void 0)&&(o=[0,0]),r[0]!=null&&(o[0]=r[0]),r[1]!=null&&(o[1]=r[1]),o}radius(t){return t===void 0?this.options.radius:(this.options.radius=t,this._hexLayout.radius(t),this)}opacity(t){return t===void 0?this.options.opacity:(this.options.opacity=t,this)}duration(t){return t===void 0?this.options.duration:(this.options.duration=t,this)}colorScaleExtent(t){return t===void 0?this.options.colorScaleExtent:(this.options.colorScaleExtent=t,this)}radiusScaleExtent(t){return t===void 0?this.options.radiusScaleExtent:(this.options.radiusScaleExtent=t,this)}colorRange(t){return t===void 0?this.options.colorRange:(this.options.colorRange=t,this._scale.color.range(t),this)}radiusRange(t){return t===void 0?this.options.radiusRange:(this.options.radiusRange=t,this._scale.radius.range(t),this)}colorScale(t){return t===void 0?this._scale.color:(this._scale.color=t,this)}radiusScale(t){return t===void 0?this._scale.radius:(this._scale.radius=t,this)}lng(t){return t===void 0?this._fn.lng:(this._fn.lng=t,this)}lat(t){return t===void 0?this._fn.lat:(this._fn.lat=t,this)}colorValue(t){return t===void 0?this._fn.colorValue:(this._fn.colorValue=t,this)}radiusValue(t){return t===void 0?this._fn.radiusValue:(this._fn.radiusValue=t,this)}fill(t){return t===void 0?this._fn.fill:(this._fn.fill=t,this)}data(t){return t===void 0?this._data:(this._data=t??[],this.redraw(),this)}dispatch(){return this._dispatch}hoverHandler(t){return t===void 0?this._hoverHandler:(this._hoverHandler=t??Lt.none(),this.redraw(),this)}getLatLngs(){const t=this;return this._data.map(function(n){return j.latLng(t._fn.lat(n),t._fn.lng(n))})}toGeoJSON(){return j.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:j.GeoJSON.latLngsToCoords(this.getLatLngs(),0)})}}function Es(e){return new Or(e)}j.HexbinLayer=Or;j.HexbinHoverHandler=Lt;j.hexbinLayer=Es;const{propsToLeafletOptions:Rs}=xn,{featureGroupProps:Bs,setupFeatureGroup:Is}=Xn.FeatureGroup,Lr={...Bs,hoverHandler:{type:Object},data:{type:Array},radius:{type:Number},opacity:{type:Number},duration:{type:Number},colorScaleExtent:{type:Array},radiusScaleExtent:{type:Array},colorRange:{type:Array},radiusRange:{type:Array}},zs=(e,t,n)=>{const{options:r,methods:o}=Is(e,t,n),i=Rs(e,Lr,r),a={...o,setRadius(u){var s;console.log("set radius"),(s=t.value)==null||s.radius(u).redraw()},setDuration(u){var s;(s=t.value)==null||s.duration(u)},setOpacity(u){var s;(s=t.value)==null||s.opacity(u)},setColorScaleExtent(u){var s;(s=t.value)==null||s.colorScaleExtent(u)},setRadiusScaleExtent(u){var s;(s=t.value)==null||s.radiusScaleExtent(u)},setColorRange(u){var s;(s=t.value)==null||s.colorRange(u)},setRadiusRange(u){var s;(s=t.value)==null||s.radiusRange(u)},setData(u){var s;(s=t.value)==null||s.data(u)}};return{options:i,methods:a}},Gs=ce({__name:"LHexbinLayer",props:Lr,emits:["ready","mouseover","mouseout","click"],setup(e,{emit:t}){const{propsBinder:n,assertInject:r}=xn,{render:o}=Xn.Layer,i=e,a=Mr(),u=jr(),s=t,l={attrs:a,slots:u,emit:s,expose:()=>{}},f=["mouseover","mouseout","click"],c=E(),p=E(!1),h=r(kr.AddLayerInjection),{methods:d,options:y}=zs(i,c,l);fe(async()=>{c.value=Me(j.hexbinLayer(y)),c.value.data(i.data??[]),pt(()=>i.hoverHandler,g=>{c.value&&g&&c.value.hoverHandler(g)},{immediate:!0}),f.forEach(g=>{c.value.dispatch().on(g,(b,w)=>{s(g,b,w)})}),n(d,c.value,i),h({...i,...d,leafletObject:c.value}),p.value=!0,W(()=>l.emit("ready",c.value))});const m=o(p.value,u);return(g,b)=>(Nr(),Pr(Cr(Tr(m))))}});export{Gs as C,Lt as Y,Vs as i,Hs as v};
